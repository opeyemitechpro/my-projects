<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="How to setup and host your own VPN Server for Free on AWS using Terraform &amp; OpenVPN">
      
      
      
        <link rel="canonical" href="https://opeyemitechpro.github.io/my-projects/terraform_projects/openvpn_access_server/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../../blog/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>OpenVPN Access Server Setup - OpeyemiTechPro Projects Portfolio</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comic+Neue:300,300i,400,400i,700,700i%7CKode+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Comic Neue";--md-code-font:"Kode Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-MGNMY7NF92"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-MGNMY7NF92",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-MGNMY7NF92",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
      
        <meta property="og:type" content="website">
      
        <meta property="og:title" content="OpenVPN Access Server Setup - OpeyemiTechPro Projects Portfolio">
      
        <meta property="og:description" content="How to setup and host your own VPN Server for Free on AWS using Terraform &amp; OpenVPN">
      
        <meta property="og:image" content="https://opeyemitechpro.github.io/my-projects/assets/images/social/terraform_projects/openvpn_access_server.png">
      
        <meta property="og:image:type" content="image/png">
      
        <meta property="og:image:width" content="1200">
      
        <meta property="og:image:height" content="630">
      
        <meta property="og:url" content="https://opeyemitechpro.github.io/my-projects/terraform_projects/openvpn_access_server/">
      
        <meta name="twitter:card" content="summary_large_image">
      
        <meta name="twitter:title" content="OpenVPN Access Server Setup - OpeyemiTechPro Projects Portfolio">
      
        <meta name="twitter:description" content="How to setup and host your own VPN Server for Free on AWS using Terraform &amp; OpenVPN">
      
        <meta name="twitter:image" content="https://opeyemitechpro.github.io/my-projects/assets/images/social/terraform_projects/openvpn_access_server.png">
      
    
    
  
  <!-- Google Adsense Code Snipet -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1002864988754361" crossorigin="anonymous"></script>
    
       

  
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: none; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#diy-project-openvpn-access-server-setup-using-terraform" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  <!-- Add announcement here, including arbitrary HTML -->
  <script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=66d5a2ea2d491c00194a1d61&amp;product=sticky-share-buttons&amp;source=platform" async="async"></script>
  
  <!-- ShareThis Sticky Social Buttons BEGIN -->
   <div class="sharethis-sticky-share-buttons"></div>
  <!-- ShareThis END -->

 
<a href="https://opeyemitechpro.github.io" target="_blank" rel="noopener" title="Opeyemi Okuboyejo's Profile" class="md-social__link">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48" height="48"><path d="M16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2s.06-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.92 7.92 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8 8 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.7 15.7 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"></path></svg>
</a>

<a href="https://www.linkedin.com/in/opeyemi-okuboyejo/" target="_blank" rel="noopener" title="Opeyemi on LinkedIn" class="md-social__link">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="48" height="48"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"></path></svg>
</a>

<a href="https://github.com/opeyemitechpro" target="_blank" rel="noopener" title="Opeyemi on GitHub" class="md-social__link">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" width="48" height="48"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>

<a href="https://youtube.com/@opeyemitechpro" target="_blank" rel="noopener" title="OpeyemiTechPro on YouTube" class="md-social__link">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="48" height="48"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"></path></svg>
</a>


<a href="mailto:okuboyejoopeyemi01@gmail.com" target="_blank" rel="noopener" title="Email Me" class="md-social__link">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48" height="48"><path d="M1.75 3h20.5c.966 0 1.75.784 1.75 1.75v14a1.75 1.75 0 0 1-1.75 1.75H1.75A1.75 1.75 0 0 1 0 18.75v-14C0 3.784.784 3 1.75 3M1.5 7.412V18.75c0 .138.112.25.25.25h20.5a.25.25 0 0 0 .25-.25V7.412l-9.52 6.433c-.592.4-1.368.4-1.96 0Zm0-2.662v.852l10.36 7a.25.25 0 0 0 .28 0l10.36-7V4.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25"></path></svg>
</a>

<a href="https://community.aws/@opeyemitechpro" target="_blank" rel="noopener" title="Opeyemi on AWS Community" class="md-social__link">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.763 10.036q.002.446.088.71c.064.176.144.368.256.576.04.063.056.127.056.183q.002.12-.152.24l-.503.335a.4.4 0 0 1-.208.072q-.12-.002-.239-.112a2.5 2.5 0 0 1-.287-.375 6 6 0 0 1-.248-.471q-.934 1.101-2.347 1.101c-.67 0-1.205-.191-1.596-.574q-.588-.575-.59-1.533c0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272 0 .551.024.846.064.296.04.6.104.918.176v-.583q-.001-.909-.375-1.277c-.255-.248-.686-.367-1.3-.367-.28 0-.568.031-.863.103q-.443.106-.862.272a2 2 0 0 1-.28.104.5.5 0 0 1-.127.023q-.168.002-.168-.247v-.391c0-.128.016-.224.056-.28a.6.6 0 0 1 .224-.167 4.6 4.6 0 0 1 1.005-.36 4.8 4.8 0 0 1 1.246-.151c.95 0 1.644.216 2.091.647q.66.645.662 1.963v2.586zm-3.24 1.214c.263 0 .534-.048.822-.144a1.8 1.8 0 0 0 .758-.51 1.3 1.3 0 0 0 .272-.512c.047-.191.08-.423.08-.694v-.335a7 7 0 0 0-.735-.136 6 6 0 0 0-.75-.048c-.535 0-.926.104-1.19.32-.263.215-.39.518-.39.917 0 .375.095.655.295.846.191.2.47.296.838.296m6.41.862c-.144 0-.24-.024-.304-.08-.064-.048-.12-.16-.168-.311L7.586 5.55a1.4 1.4 0 0 1-.072-.32c0-.128.064-.2.191-.2h.783q.227-.001.31.08c.065.048.113.16.16.312l1.342 5.284 1.245-5.284q.058-.24.151-.312a.55.55 0 0 1 .32-.08h.638c.152 0 .256.025.32.08.063.048.12.16.151.312l1.261 5.348 1.381-5.348q.074-.24.16-.312a.52.52 0 0 1 .311-.08h.743c.127 0 .2.065.2.2 0 .04-.009.08-.017.128a1 1 0 0 1-.056.2l-1.923 6.17q-.072.24-.168.311a.5.5 0 0 1-.303.08h-.687c-.151 0-.255-.024-.32-.08-.063-.056-.119-.16-.15-.32l-1.238-5.148-1.23 5.14c-.04.16-.087.264-.15.32-.065.056-.177.08-.32.08zm10.256.215c-.415 0-.83-.048-1.229-.143-.399-.096-.71-.2-.918-.32-.128-.071-.215-.151-.247-.223a.6.6 0 0 1-.048-.224v-.407c0-.167.064-.247.183-.247q.072 0 .144.024c.048.016.12.048.2.08q.408.181.878.279c.319.064.63.096.95.096.502 0 .894-.088 1.165-.264a.86.86 0 0 0 .415-.758.78.78 0 0 0-.215-.559c-.144-.151-.416-.287-.807-.415l-1.157-.36c-.583-.183-1.014-.454-1.277-.813a1.9 1.9 0 0 1-.4-1.158q0-.502.216-.886c.144-.255.335-.479.575-.654.24-.184.51-.32.83-.415.32-.096.655-.136 1.006-.136.175 0 .359.008.535.032.183.024.35.056.518.088q.24.058.455.127.216.072.336.144a.7.7 0 0 1 .24.2.43.43 0 0 1 .071.263v.375q-.002.254-.184.256a.8.8 0 0 1-.303-.096 3.65 3.65 0 0 0-1.532-.311c-.455 0-.815.071-1.062.223s-.375.383-.375.71c0 .224.08.416.24.567.159.152.454.304.877.44l1.134.358c.574.184.99.44 1.237.767s.367.702.367 1.117c0 .343-.072.655-.207.926a2.2 2.2 0 0 1-.583.703c-.248.2-.543.343-.886.447-.36.111-.734.167-1.142.167m1.509 3.88c-2.626 1.94-6.442 2.969-9.722 2.969-4.598 0-8.74-1.7-11.87-4.526-.247-.223-.024-.527.272-.351 3.384 1.963 7.559 3.153 11.877 3.153 2.914 0 6.114-.607 9.06-1.852.439-.2.814.287.383.607m1.094-1.246c-.336-.43-2.22-.207-3.074-.103-.255.032-.295-.192-.063-.36 1.5-1.053 3.967-.75 4.254-.399.287.36-.08 2.826-1.485 4.007-.215.184-.423.088-.327-.151.32-.79 1.03-2.57.695-2.994"></path></svg>
</a>

<a href="https://dev.to/opeyemitechpro" target="_blank" rel="noopener" title="Opeyemi on Dev.to" class="md-social__link">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="48" height="48"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M120.12 208.29c-3.88-2.9-7.77-4.35-11.65-4.35H91.03v104.47h17.45c3.88 0 7.77-1.45 11.65-4.35s5.82-7.25 5.82-13.06v-69.65c-.01-5.8-1.96-10.16-5.83-13.06M404.1 32H43.9C19.7 32 .06 51.59 0 75.8v360.4C.06 460.41 19.7 480 43.9 480h360.2c24.21 0 43.84-19.59 43.9-43.8V75.8c-.06-24.21-19.7-43.8-43.9-43.8M154.2 291.19c0 18.81-11.61 47.31-48.36 47.25h-46.4V172.98h47.38c35.44 0 47.36 28.46 47.37 47.28zm100.68-88.66H201.6v38.42h32.57v29.57H201.6v38.41h53.29v29.57h-62.18c-11.16.29-20.44-8.53-20.72-19.69V193.7c-.27-11.15 8.56-20.41 19.71-20.69h63.19zm103.64 115.29c-13.2 30.75-36.85 24.63-47.44 0l-38.53-144.8h32.57l29.71 113.72 29.57-113.72h32.58z"></path></svg>
</a>


<a href="https://x.com/opeyemitechpro" target="_blank" rel="noopener" title="Opeyemi on Twitter" class="md-social__link">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="48" height="48"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"></path></svg>
</a>

<a href="https://t.me/opeyemitechpro_cloud" target="_blank" rel="noopener" title="Opeyemi on Telegram" class="md-social__link">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8m114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716 43.8 43.8 0 0 1 .417 9.769"></path></svg>
</a>

<br>
<a href="https://opeyemitechpro.github.io"><img src="https://readme-typing-svg.demolab.com?font=roboto&amp;duration=3000&amp;pause=500&amp;width=435&amp;lines=Welcome+to+my+Project+Portfolio+" alt="OpeyemiTechPro"></a>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1002864988754361" crossorigin="anonymous"></script>
  
  
          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://opeyemitechpro.github.io" title="OpeyemiTechPro Projects Portfolio" class="md-header__button md-logo" aria-label="OpeyemiTechPro Projects Portfolio" data-md-component="logo">
      
  <img src="../../assets/images/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpeyemiTechPro Projects Portfolio
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OpenVPN Access Server Setup
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo" aria-label="Switch to light mode" type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="red" aria-label="Switch to dark mode" type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="yellow" aria-label="Switch to system preference" type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"></path></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/opeyemitechpro/my-projects" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    OpeyemiTechPro Projects
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../profile/" class="md-tabs__link">
        
  
  
    
  
  About Me

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
    
  
  Start Here

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.44 0v7.575l6.561 3.79V3.787zm21.12 4.227-6.561 3.791v7.574l6.56-3.787zM8.72 4.23v7.575l6.561 3.787V8.018zm0 8.405v7.575L15.28 24v-7.578z"></path></svg>
    
  
  Terraform Projects

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../blog/" class="md-tabs__link">
          
  
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 5v14H4V5zm0-2H4c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2m-2 12H6v2h12zm-8-8H6v6h4zm2 2h6V7h-6zm6 2h-6v2h6z"></path></svg>
    
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../yt/" class="md-tabs__link">
        
  
  
    
  
  YouTube

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://opeyemitechpro.github.io" title="OpeyemiTechPro Projects Portfolio" class="md-nav__button md-logo" aria-label="OpeyemiTechPro Projects Portfolio" data-md-component="logo">
      
  <img src="../../assets/images/favicon.png" alt="logo">

    </a>
    OpeyemiTechPro Projects Portfolio
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/opeyemitechpro/my-projects" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"></path></svg>
  </div>
  <div class="md-source__repository">
    OpeyemiTechPro Projects
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../profile/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
  
  <span class="md-ellipsis">
    About Me
    
      <br>
      <small>View my profile here</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
  
  <span class="md-ellipsis">
    Start Here
    
      <br>
      <small>Start your navigation of my Project Documentation from here</small>
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.44 0v7.575l6.561 3.79V3.787zm21.12 4.227-6.561 3.791v7.574l6.56-3.787zM8.72 4.23v7.575l6.561 3.787V8.018zm0 8.405v7.575L15.28 24v-7.578z"></path></svg>
  
  <span class="md-ellipsis">
    Terraform Projects
    
      <br>
      <small>Terraform Related Projects</small>
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Terraform Projects
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .357C5.385.357 0 5.69 0 12.254c0 4.36 2.358 8.153 5.896 10.204l.77-5.076a7.05 7.05 0 0 1-1.846-4.719c0-3.897 3.18-7.076 7.13-7.076 3.948 0 7.126 3.18 7.126 7.076 0 1.847-.717 3.488-1.846 4.77L18 22.51c3.59-2.05 6-5.899 6-10.258C24 5.69 18.615.357 12 .357m-.05 8.157a3.786 3.786 0 0 0-3.796 3.795 3.74 3.74 0 0 0 2.461 3.54L9.13 23.643h5.64l-1.435-7.795c1.385-.564 2.41-1.898 2.41-3.54a3.786 3.786 0 0 0-3.795-3.794"></path></svg>
  
  <span class="md-ellipsis">
    OpenVPN Access Server Setup
    
      <br>
      <small>Setup &amp; Host Your Own VPN Access Server on AWS using Terraform</small>
    
  </span>
  
    
  
  
    <span class="md-status md-status--new" title="Recently Updated">
    </span>
  

  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .357C5.385.357 0 5.69 0 12.254c0 4.36 2.358 8.153 5.896 10.204l.77-5.076a7.05 7.05 0 0 1-1.846-4.719c0-3.897 3.18-7.076 7.13-7.076 3.948 0 7.126 3.18 7.126 7.076 0 1.847-.717 3.488-1.846 4.77L18 22.51c3.59-2.05 6-5.899 6-10.258C24 5.69 18.615.357 12 .357m-.05 8.157a3.786 3.786 0 0 0-3.796 3.795 3.74 3.74 0 0 0 2.461 3.54L9.13 23.643h5.64l-1.435-7.795c1.385-.564 2.41-1.898 2.41-3.54a3.786 3.786 0 0 0-3.795-3.794"></path></svg>
  
  <span class="md-ellipsis">
    OpenVPN Access Server Setup
    
      <br>
      <small>Setup &amp; Host Your Own VPN Access Server on AWS using Terraform</small>
    
  </span>
  
    
  
  
    <span class="md-status md-status--new" title="Recently Updated">
    </span>
  

  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="Topics on This Page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Topics on This Page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup-and-host-your-own-free-vpn-server-on-aws-using-terraform-and-openvpn" class="md-nav__link">
    <span class="md-ellipsis">
      Setup and Host Your Own Free VPN Server on AWS Using Terraform and OpenVPN
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-requisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-this-terraform-configuration-script-does" class="md-nav__link">
    <span class="md-ellipsis">
      What this Terraform Configuration Script Does
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-the-terraform-configuration-script-works" class="md-nav__link">
    <span class="md-ellipsis">
      How the Terraform Configuration Script works
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-the-script-options" class="md-nav__link">
    <span class="md-ellipsis">
      Setting the script options
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-script" class="md-nav__link">
    <span class="md-ellipsis">
      Running the script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start Guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clone-the-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Clone the Repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-the-terraform-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Initialize the terraform configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apply-the-terraform-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Apply the Terraform Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Apply the Terraform Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#list-of-accepted-aws-regions" class="md-nav__link">
    <span class="md-ellipsis">
      List of accepted AWS regions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs" class="md-nav__link">
    <span class="md-ellipsis">
      Outputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-to-your-vpn" class="md-nav__link">
    <span class="md-ellipsis">
      Connect to your VPN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-your-vpn-connection" class="md-nav__link">
    <span class="md-ellipsis">
      Testing your VPN Connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      Cleanup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Use Cases
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4">
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../blog/" class="md-nav__link ">
              
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 5v14H4V5zm0-2H4c-1.11 0-2 .89-2 2v14c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2m-2 12H6v2h12zm-8-8H6v6h4zm2 2h6V7h-6zm6 2h-6v2h6z"></path></svg>
  
  <span class="md-ellipsis">
    Blog
    
      <br>
      <small>My Blog HomePage</small>
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2">
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/archive/2024/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2024
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3">
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Categories
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Categories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/aws/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AWS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../blog/category/blog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yt/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path></svg>
  
  <span class="md-ellipsis">
    YouTube
    
      <br>
      <small>View my YouTube Channel</small>
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="Topics on This Page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Topics on This Page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup-and-host-your-own-free-vpn-server-on-aws-using-terraform-and-openvpn" class="md-nav__link">
    <span class="md-ellipsis">
      Setup and Host Your Own Free VPN Server on AWS Using Terraform and OpenVPN
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-requisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-this-terraform-configuration-script-does" class="md-nav__link">
    <span class="md-ellipsis">
      What this Terraform Configuration Script Does
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-the-terraform-configuration-script-works" class="md-nav__link">
    <span class="md-ellipsis">
      How the Terraform Configuration Script works
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-the-script-options" class="md-nav__link">
    <span class="md-ellipsis">
      Setting the script options
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-script" class="md-nav__link">
    <span class="md-ellipsis">
      Running the script
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start Guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clone-the-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Clone the Repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#initialize-the-terraform-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Initialize the terraform configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apply-the-terraform-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Apply the Terraform Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Apply the Terraform Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#list-of-accepted-aws-regions" class="md-nav__link">
    <span class="md-ellipsis">
      List of accepted AWS regions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#outputs" class="md-nav__link">
    <span class="md-ellipsis">
      Outputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connect-to-your-vpn" class="md-nav__link">
    <span class="md-ellipsis">
      Connect to your VPN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-your-vpn-connection" class="md-nav__link">
    <span class="md-ellipsis">
      Testing your VPN Connection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanup" class="md-nav__link">
    <span class="md-ellipsis">
      Cleanup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Use Cases
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
  <!-- AI Buttons Row -->
  <div style="display: flex; justify-content: flex-end; gap: 0.5rem; margin-bottom: 1rem;">
    <a href="https://chat.openai.com/?q=OpenVPN%20Access%20Server%20Setup%20terraform_projects/openvpn_access_server/" target="_blank" class="md-button">
      💬 Open in ChatGPT
    </a>

    <a href="https://claude.ai/new?q=OpenVPN%20Access%20Server%20Setup%20terraform_projects/openvpn_access_server/" target="_blank" class="md-button">
      🤖 Open in Claude
    </a>
  </div>

  
                  

  <nav class="md-tags">
    
      
      
        
        
          
        
      
      
        <a href="../../tags/#tag:aws" class="md-tag md-tag-icon md-tag--None">AWS</a>
      
    
      
      
        
        
      
      
        <a href="../../tags/#tag:openvpn" class="md-tag md-tag-icon">OpenVPN</a>
      
    
      
      
        
        
          
        
      
      
        <a href="../../tags/#tag:terraform" class="md-tag md-tag-icon md-tag--None">Terraform</a>
      
    
  </nav>


  
    <a href="https://github.com/opeyemitechpro/my-projects/edit/main/docs/terraform_projects/openvpn_access_server.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/opeyemitechpro/my-projects/raw/main/docs/terraform_projects/openvpn_access_server.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"></path></svg>
    </a>
  


<h1 id="diy-project-openvpn-access-server-setup-using-terraform"><strong>DIY Project - OpenVPN Access Server Setup Using Terraform</strong><a class="headerlink" href="#diy-project-openvpn-access-server-setup-using-terraform" title="Copy this link to reference this section">¶</a></h1>
<h2 id="setup-and-host-your-own-free-vpn-server-on-aws-using-terraform-and-openvpn"><strong>Setup and Host Your Own Free VPN Server on AWS Using Terraform and OpenVPN</strong><a class="headerlink" href="#setup-and-host-your-own-free-vpn-server-on-aws-using-terraform-and-openvpn" title="Copy this link to reference this section">¶</a></h2>
<p>In this mini-project, I will demonstrate how to setup and self-host a VPN server on AWS using terraform and OpenVPN Access Server.</p>
<details class="youtube" open="open">
<summary>Watch the Video - How To Create a Free Self-Hosted VPN Server on AWS using Terraform and OpenVPN</summary>
<figure>
<p></p><figure markdown="1">
<a href="https://youtu.be/sWBeZ_bx2Ps" target="_blank"><img alt="Create a Free Self-Hosted VPN Server on AWS using Terraform and OpenVPN" src="../../assets/images/OpenVPN-on-AWS-Using-Terraform.png" title="Create a Free Self-Hosted VPN Server on AWS using Terraform and OpenVPN"></a>
<!-- <figcaption>Create a Free Self-Hosted VPN Server on AWS using Terraform and OpenVPN</figcaption>  -->
</figure><p></p>
<figcaption>
<p>How to Create a Free Self-Hosted VPN Server on AWS using Terraform and OpenVPN</p>
</figcaption>
</figure>
</details>
<h2 id="introduction"><strong>Introduction</strong><a class="headerlink" href="#introduction" title="Copy this link to reference this section">¶</a></h2>
<p>Setting up a self-hosted VPN server can be a cost-effective and secure solution for personal or organizational needs. This documentation provides a step-by-step guide on using a Terraform configuration script to deploy an OpenVPN Access server on AWS. 
With this guide, you'll learn how to configure the script, customize it for your requirements, and launch a fully functional VPN server in less than 5-minutes and ensures your internet traffic remains private and encrypted without been locked in a vpn subscription plan.
This VPN server is also "disposable", meaning, you can create and delete it anytime after use with just one command <img alt="😄" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.1.0/assets/svg/1f604.svg" title=":smile:"> </p>
<h2 id="pre-requisites"><strong>Pre-requisites</strong><a class="headerlink" href="#pre-requisites" title="Copy this link to reference this section">¶</a></h2>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" checked><span class="task-list-indicator"></span></label> AWS account <em>(<a href="https://aws.amazon.com/free/" target="_blank">free tier account will work</a>)</em></li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" checked><span class="task-list-indicator"></span></label> Terraform installed on local machine <em>(<a href="https://developer.hashicorp.com/terraform/install" target="_blank">How to Install Terraform</a>)</em></li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" checked><span class="task-list-indicator"></span></label> OpenVPN Connect Client software installed on local machine <em>(download from <a href="https://openvpn.net/client/" target="_blank">here</a>)</em></li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" checked><span class="task-list-indicator"></span></label> Your AWS access key ID and secret access key <em>(learn how to get your AWS access keys <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-authentication-user.html" target="_blank">here</a>)</em></li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" checked><span class="task-list-indicator"></span></label> AWS CLI installed and configured with your AWS access key ID and Secret access keys <em>(learn more about AWS CLI <a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-quickstart.html" target="_blank">here</a>)</em> </li>
<li class="task-list-item">
<p><label class="task-list-control"><input type="checkbox" checked><span class="task-list-indicator"></span></label> The OpenVPN-Terraform Setup Script <em>(click the button below)</em></p>
<p></p><div style="text-align: center;">
<a class="md-button md-button--primary" href="https://github.com/opeyemitechpro/OpenVPN-Terraform-Setup" target="_blank">OpenVPN-Terraform Source Code <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></span></a>
</div><p></p>
</li>
</ul>
<h2 id="what-this-terraform-configuration-script-does"><strong>What this Terraform Configuration Script Does</strong><a class="headerlink" href="#what-this-terraform-configuration-script-does" title="Copy this link to reference this section">¶</a></h2>
<p>This terraform configuration creates a fully functional, free and ready-to-use self-hosted OpenVPN Server in any chosen AWS region. The script perfomes the following operations:</p>
<ul>
<li>Creates a Ubuntu 22.04 EC2 instance and configures a fully functional OpenVPN Access Server on it</li>
<li>Configures the server as a type t2-micro instance so that it can run within the AWS Free-tier plan (Learn more about the AWS free-tier plan <a href="https://aws.amazon.com/free" target="_blank">here</a>)</li>
<li>Sets up and configures the VPN server with an IP address in the specified AWS region.</li>
<li>Generates an AWS keypair file for optional SSH connection to the EC2 instance, downloads the file and saves it in the terraform working directory on your local machine. The chosen AWS region is appended to the name of the keypair file.</li>
<li>Generates an OpenVPN User Profile file (*.ovpn) that will be used to authenticate and establish an encrypted VPN connection from your local machine to the VPN server. The OpenPVN User Profile file is also donwloaded and saved to the terraform working directory on your local machine.</li>
<li>One command tear down that destroys and cleans up the whole infrastructure along with the locally created files (the keypair file and the *.ovpn user profile file)</li>
</ul>
<h2 id="how-the-terraform-configuration-script-works"><strong>How the Terraform Configuration Script works</strong><a class="headerlink" href="#how-the-terraform-configuration-script-works" title="Copy this link to reference this section">¶</a></h2>
<p>Technical details about how the terraform script works is described below:</p>
<details class="info">
<summary>Click here to see details of how the OpenVPN Terraform config works under the hood</summary>
<p></p><div style="text-align: center;">
<a class="md-button" href="https://github.com/opeyemitechpro/OpenVPN-Terraform-Setup" target="_blank">OpenVPN-Terraform Source Code <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></span></a>
</div>    <p></p>
<p>Each of the files in  this terraform configuration module is explained below:</p>
<details class="tip">
<summary>The <code>ami.tf</code> file</summary>
<details class="code-file" open="open">
<summary>ami.tf</summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># Select latest Ubuntu 22.04 ami </span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="kr">data</span><span class="w"> </span><span class="nc">"aws_ami"</span><span class="w"> </span><span class="nv">"ubuntu"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="na">most_recent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="hll"><span class="nb">filter</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="hll"><span class="w">    </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"name"</span>
</span><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="hll"><span class="w">    </span><span class="na">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"ubuntu/images/hvm-ssd/ubuntu-jammy-22.04-amd64-server-*"</span><span class="p">]</span>
</span><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="hll"><span class="p">}</span><span class="c1"> # (1)!</span>
</span><a id="__codelineno-0-10" name="__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="hll"><span class="nb">filter</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="hll"><span class="w">    </span><span class="na">name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"virtualization-type"</span>
</span><a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="hll"><span class="w">    </span><span class="na">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"hvm"</span><span class="p">]</span>
</span><a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="hll"><span class="p">}</span><span class="c1"> # (2)!</span>
</span><a id="__codelineno-0-15" name="__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="hll"><span class="na">owners</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"099720109477"</span><span class="p">]</span><span class="c1">  # Canonical's AWS account ID</span>
</span><a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="p">}</span><span class="c1"> # (3)!</span>
</code></pre></div></td></tr></tbody></table></div>
<ol>
<li>Lines 6-9 filters the name of the ami "ubuntu/images/hvm-ssd/ubuntu-jammy-22.04-amd64-server-*"</li>
<li>Lines 11-14 filters the virtualization type of the ami</li>
<li>Line 16 filters the AWS account ID of the ami publisher - Canonical</li>
</ol>
</details>
<p>This <code>ami.tf</code> is used to find the latest Ubuntu 22.04 AMI (Amazon Machine Image) from the AWS ami Catalog. </p>
<ul>
<li>
<p>It creates a data source named "ubuntu" that searches for AMIs with these criteria:</p>
<ul>
<li>
<p>Uses most_recent = true to get the latest version</p>
</li>
<li>
<p>Filters for Ubuntu 22.04 (Jammy Jellyfish) images using the name pattern</p>
</li>
<li>
<p>Ensures it's using HVM (Hardware Virtual Machine) virtualization</p>
</li>
<li>
<p>Only looks for images owned by Canonical (Ubuntu's publisher) using their AWS account ID (099720109477)</p>
</li>
</ul>
</li>
</ul>
<p>This prevents hardcoding a specific AMI ID into the script, which could become outdated. The AMI ID is then referenced elsewhere in the Terraform code using <code>data.aws_ami.ubuntu.id</code></p>
</details>
<details class="tip">
<summary>The <code>OpenVPN_ec2.tf</code> file</summary>
<details class="code-file" open="open">
<summary>OpenVPN_ec2.tf</summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span>
<span class="normal"><a href="#__codelineno-1-21">21</a></span>
<span class="normal"><a href="#__codelineno-1-22">22</a></span>
<span class="normal"><a href="#__codelineno-1-23">23</a></span>
<span class="normal"><a href="#__codelineno-1-24">24</a></span>
<span class="normal"><a href="#__codelineno-1-25">25</a></span>
<span class="normal"><a href="#__codelineno-1-26">26</a></span>
<span class="normal"><a href="#__codelineno-1-27">27</a></span>
<span class="normal"><a href="#__codelineno-1-28">28</a></span>
<span class="normal"><a href="#__codelineno-1-29">29</a></span>
<span class="normal"><a href="#__codelineno-1-30">30</a></span>
<span class="normal"><a href="#__codelineno-1-31">31</a></span>
<span class="normal"><a href="#__codelineno-1-32">32</a></span>
<span class="normal"><a href="#__codelineno-1-33">33</a></span>
<span class="normal"><a href="#__codelineno-1-34">34</a></span>
<span class="normal"><a href="#__codelineno-1-35">35</a></span>
<span class="normal"><a href="#__codelineno-1-36">36</a></span>
<span class="normal"><a href="#__codelineno-1-37">37</a></span>
<span class="normal"><a href="#__codelineno-1-38">38</a></span>
<span class="normal"><a href="#__codelineno-1-39">39</a></span>
<span class="normal"><a href="#__codelineno-1-40">40</a></span>
<span class="normal"><a href="#__codelineno-1-41">41</a></span>
<span class="normal"><a href="#__codelineno-1-42">42</a></span>
<span class="normal"><a href="#__codelineno-1-43">43</a></span>
<span class="normal"><a href="#__codelineno-1-44">44</a></span>
<span class="normal"><a href="#__codelineno-1-45">45</a></span>
<span class="normal"><a href="#__codelineno-1-46">46</a></span>
<span class="normal"><a href="#__codelineno-1-47">47</a></span>
<span class="normal"><a href="#__codelineno-1-48">48</a></span>
<span class="normal"><a href="#__codelineno-1-49">49</a></span>
<span class="normal"><a href="#__codelineno-1-50">50</a></span>
<span class="normal"><a href="#__codelineno-1-51">51</a></span>
<span class="normal"><a href="#__codelineno-1-52">52</a></span>
<span class="normal"><a href="#__codelineno-1-53">53</a></span>
<span class="normal"><a href="#__codelineno-1-54">54</a></span>
<span class="normal"><a href="#__codelineno-1-55">55</a></span>
<span class="normal"><a href="#__codelineno-1-56">56</a></span>
<span class="normal"><a href="#__codelineno-1-57">57</a></span>
<span class="normal"><a href="#__codelineno-1-58">58</a></span>
<span class="normal"><a href="#__codelineno-1-59">59</a></span>
<span class="normal"><a href="#__codelineno-1-60">60</a></span>
<span class="normal"><a href="#__codelineno-1-61">61</a></span>
<span class="normal"><a href="#__codelineno-1-62">62</a></span>
<span class="normal"><a href="#__codelineno-1-63">63</a></span>
<span class="normal"><a href="#__codelineno-1-64">64</a></span>
<span class="normal"><a href="#__codelineno-1-65">65</a></span>
<span class="normal"><a href="#__codelineno-1-66">66</a></span>
<span class="normal"><a href="#__codelineno-1-67">67</a></span>
<span class="normal"><a href="#__codelineno-1-68">68</a></span>
<span class="normal"><a href="#__codelineno-1-69">69</a></span>
<span class="normal"><a href="#__codelineno-1-70">70</a></span>
<span class="normal"><a href="#__codelineno-1-71">71</a></span>
<span class="normal"><a href="#__codelineno-1-72">72</a></span>
<span class="normal"><a href="#__codelineno-1-73">73</a></span>
<span class="normal"><a href="#__codelineno-1-74">74</a></span>
<span class="normal"><a href="#__codelineno-1-75">75</a></span>
<span class="normal"><a href="#__codelineno-1-76">76</a></span>
<span class="normal"><a href="#__codelineno-1-77">77</a></span>
<span class="normal"><a href="#__codelineno-1-78">78</a></span>
<span class="normal"><a href="#__codelineno-1-79">79</a></span>
<span class="normal"><a href="#__codelineno-1-80">80</a></span>
<span class="normal"><a href="#__codelineno-1-81">81</a></span>
<span class="normal"><a href="#__codelineno-1-82">82</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="hll"><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_instance"</span><span class="w"> </span><span class="nv">"OpenVPN_Server"</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="hll"><span class="na">ami</span><span class="w">                     </span><span class="o">=</span><span class="w"> </span><span class="nv">data.aws_ami.ubuntu.id</span>
</span><a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="hll"><span class="na">instance_type</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="nv">var.OpenVPN_instance_type</span>
</span><a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="hll"><span class="na">vpc_security_group_ids</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="nv">aws_security_group.openvpn_SG.id</span><span class="w"> </span><span class="p">]</span>
</span><a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="hll"><span class="na">user_data</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="nf">templatefile</span><span class="p">(</span><span class="s2">"./openvpn_userdata.tpl"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="na">openvpn_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">local.openvpn_user</span><span class="p">})</span>
</span><a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="hll"><span class="na">key_name</span><span class="w">                </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_key_pair.key_pair.key_name</span>
</span><a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="hll">
</span><a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="hll"><span class="nb">root_block_device</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="hll"><span class="w">    </span><span class="na">volume_size</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="m">8</span>
</span><a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="hll"><span class="p">}</span>
</span><a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="hll">
</span><a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="hll"><span class="c1"># Set the metadata service to allow IMDSv2</span>
</span><a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="hll"><span class="nb">metadata_options</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="hll"><span class="w">    </span><span class="na">http_tokens</span><span class="w">                 </span><span class="o">=</span><span class="w"> </span><span class="s2">"optional"</span><span class="c1">    # Allows IMDSv1 and IMDSv2</span>
</span><a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="hll"><span class="w">    </span><span class="na">http_put_response_hop_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="c1">      # Default hop limit for the PUT request</span>
</span><a id="__codelineno-1-16" name="__codelineno-1-16"></a><span class="hll"><span class="w">    </span><span class="na">http_endpoint</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s2">"enabled"</span><span class="c1">     # Enable metadata service</span>
</span><a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="hll"><span class="p">}</span>
</span><a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="hll">
</span><a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="hll"><span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="hll"><span class="w">    </span><span class="na">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"${var.project_name}_Server"</span>
</span><a id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="hll"><span class="w">    </span><span class="na">Region</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="nv">var.selected_region</span>
</span><a id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="hll"><span class="w">    </span><span class="na">KeyPair</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">local.key_pair_name</span>
</span><a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="hll"><span class="w">    </span><span class="na">Project</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">var.project_name</span>
</span><a id="__codelineno-1-24" name="__codelineno-1-24"></a><span class="hll"><span class="p">}</span>
</span><a id="__codelineno-1-25" name="__codelineno-1-25"></a>
<a id="__codelineno-1-26" name="__codelineno-1-26"></a><span class="p">}</span>
<a id="__codelineno-1-27" name="__codelineno-1-27"></a>
<a id="__codelineno-1-28" name="__codelineno-1-28"></a><span class="nb">locals</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-29" name="__codelineno-1-29"></a><span class="c1"># Create key name with OpenVPN-Keypair prefix and region</span>
<a id="__codelineno-1-30" name="__codelineno-1-30"></a><span class="na">key_pair_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"OpenVPN-Keypair-${var.selected_region}"</span>
<a id="__codelineno-1-31" name="__codelineno-1-31"></a>
<a id="__codelineno-1-32" name="__codelineno-1-32"></a><span class="c1"># Create Profile name for the OpenVPN User</span>
<a id="__codelineno-1-33" name="__codelineno-1-33"></a><span class="na">openvpn_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"OpeyemiTechPro-${var.selected_region}"</span>
<a id="__codelineno-1-34" name="__codelineno-1-34"></a>
<a id="__codelineno-1-35" name="__codelineno-1-35"></a><span class="c1"># Display formatted region information</span>
<a id="__codelineno-1-36" name="__codelineno-1-36"></a><span class="na">region_display</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">join</span><span class="p">(</span><span class="s2">"\n", [for region, location in var.aws_regions : format("%s = %s"</span><span class="p">,</span><span class="w"> </span><span class="err">region</span><span class="p">,</span><span class="w"> </span><span class="err">location</span><span class="p">)])</span>
<a id="__codelineno-1-37" name="__codelineno-1-37"></a>
<a id="__codelineno-1-38" name="__codelineno-1-38"></a><span class="p">}</span>
<a id="__codelineno-1-39" name="__codelineno-1-39"></a>
<a id="__codelineno-1-40" name="__codelineno-1-40"></a>
<a id="__codelineno-1-41" name="__codelineno-1-41"></a><span class="c1"># Generate a private key</span>
<a id="__codelineno-1-42" name="__codelineno-1-42"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">"tls_private_key"</span><span class="w"> </span><span class="nv">"key_pair"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-43" name="__codelineno-1-43"></a><span class="na">algorithm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"RSA"</span>
<a id="__codelineno-1-44" name="__codelineno-1-44"></a><span class="na">rsa_bits</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="m">2048</span>
<a id="__codelineno-1-45" name="__codelineno-1-45"></a><span class="p">}</span>
<a id="__codelineno-1-46" name="__codelineno-1-46"></a>
<a id="__codelineno-1-47" name="__codelineno-1-47"></a><span class="c1"># Create key pair in AWS</span>
<a id="__codelineno-1-48" name="__codelineno-1-48"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_key_pair"</span><span class="w"> </span><span class="nv">"key_pair"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-49" name="__codelineno-1-49"></a><span class="na">key_name</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">local.key_pair_name</span>
<a id="__codelineno-1-50" name="__codelineno-1-50"></a><span class="na">public_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">tls_private_key.key_pair.public_key_openssh</span>
<a id="__codelineno-1-51" name="__codelineno-1-51"></a>
<a id="__codelineno-1-52" name="__codelineno-1-52"></a><span class="c1"># tag the key pair</span>
<a id="__codelineno-1-53" name="__codelineno-1-53"></a><span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-54" name="__codelineno-1-54"></a><span class="w">    </span><span class="na">Name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nv">local.key_pair_name</span>
<a id="__codelineno-1-55" name="__codelineno-1-55"></a><span class="w">    </span><span class="na">Region</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="nv">var.selected_region</span>
<a id="__codelineno-1-56" name="__codelineno-1-56"></a><span class="w">    </span><span class="na">Project</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">var.project_name</span>
<a id="__codelineno-1-57" name="__codelineno-1-57"></a><span class="w">    </span><span class="na">CreatedBy</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Terraform"</span>
<a id="__codelineno-1-58" name="__codelineno-1-58"></a><span class="p">}</span>
<a id="__codelineno-1-59" name="__codelineno-1-59"></a><span class="p">}</span>
<a id="__codelineno-1-60" name="__codelineno-1-60"></a>
<a id="__codelineno-1-61" name="__codelineno-1-61"></a><span class="c1"># Save private key locally</span>
<a id="__codelineno-1-62" name="__codelineno-1-62"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">"local_file"</span><span class="w"> </span><span class="nv">"private_key"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-63" name="__codelineno-1-63"></a><span class="na">content</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="nv">tls_private_key.key_pair.private_key_pem</span>
<a id="__codelineno-1-64" name="__codelineno-1-64"></a><span class="na">filename</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"${local.key_pair_name}.pem"</span>
<a id="__codelineno-1-65" name="__codelineno-1-65"></a><span class="na">file_permission</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0400"</span>
<a id="__codelineno-1-66" name="__codelineno-1-66"></a><span class="p">}</span>
<a id="__codelineno-1-67" name="__codelineno-1-67"></a>
<a id="__codelineno-1-68" name="__codelineno-1-68"></a>
<a id="__codelineno-1-69" name="__codelineno-1-69"></a><span class="c1"># Create a null resource to display available regions</span>
<a id="__codelineno-1-70" name="__codelineno-1-70"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">"null_resource"</span><span class="w"> </span><span class="nv">"region_display"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-71" name="__codelineno-1-71"></a><span class="nb">triggers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-72" name="__codelineno-1-72"></a><span class="w">    </span><span class="na">always_run</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">timestamp</span><span class="p">()</span>
<a id="__codelineno-1-73" name="__codelineno-1-73"></a><span class="p">}</span>
<a id="__codelineno-1-74" name="__codelineno-1-74"></a>
<a id="__codelineno-1-75" name="__codelineno-1-75"></a><span class="kr">provisioner</span><span class="w"> </span><span class="nv">"local-exec"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-76" name="__codelineno-1-76"></a><span class="w">    </span><span class="na">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&lt;-</span><span class="dl">EOT</span>
<a id="__codelineno-1-77" name="__codelineno-1-77"></a><span class="sh">    echo "Available AWS Regions:"</span>
<a id="__codelineno-1-78" name="__codelineno-1-78"></a><span class="sh">    echo "${local.region_display}"</span>
<a id="__codelineno-1-79" name="__codelineno-1-79"></a><span class="sh">    echo "\nSelected Region: ${var.selected_region} (${var.aws_regions[var.selected_region]})"</span>
<a id="__codelineno-1-80" name="__codelineno-1-80"></a><span class="dl">    EOT</span>
<a id="__codelineno-1-81" name="__codelineno-1-81"></a><span class="p">}</span>
<a id="__codelineno-1-82" name="__codelineno-1-82"></a><span class="p">}</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<p>This is the main config file that sets up the OpenVPN server infrastructure.</p>
<ul>
<li>
<p>It reates an EC2 instance for the OpenVPN server with the specified configurations (using Ubuntu AMI selected above)</p>
</li>
<li>
<p>Sets up a key pair for SSH access</p>
</li>
<li>
<p>Configures the instance metadata options so it can be queried by the user_data script</p>
</li>
<li>
<p>Creates and saves an RSA private key locally</p>
</li>
<li>
<p>Includes tags for resource management</p>
</li>
<li>
<p>Sets the connection profile name for the VPN server</p>
</li>
<li>
<p>Displays available AWS regions through a null resource and determines the selected region during execution</p>
</li>
</ul>
<p><mark>Each code section is explained breifly below:</mark></p>
<p><mark><strong>aws_instance Resource</strong></mark> </p>
<p>This resource defines the EC2 instance for the OpenVPN server.  </p>
<ul>
<li><strong><code>ami</code></strong>: Uses the ID of a specific Ubuntu AMI fetched via a data source.  </li>
<li><strong><code>instance_type</code></strong>: Sets the EC2 instance type, determined by a variable (<code>var.OpenVPN_instance_type</code>).  </li>
<li><strong><code>vpc_security_group_ids</code></strong>: Attaches the instance to a specific security group (<code>aws_security_group.openvpn_SG</code>).  </li>
<li><strong><code>user_data</code></strong>: Provides initialization commands for the instance via a template file. Custom variables, such as <code>openvpn_user</code>, are passed to the template.  </li>
<li><strong><code>key_name</code></strong>: Associates the instance with an SSH key pair created earlier.  </li>
<li><strong><code>root_block_device</code></strong>: Defines the root storage for the instance, setting its size to 8 GB.  </li>
<li><strong><code>metadata_options</code></strong>: Configures the EC2 metadata service to support both IMDSv1 and IMDSv2 for instance metadata retrieval.  </li>
<li><strong><code>tags</code></strong>: Adds custom tags to the instance for identification, including project and region details.</li>
</ul>
<hr>
<p><mark><strong>locals Block</strong></mark>  </p>
<p>Defines reusable local variables and values for the configuration.  </p>
<ul>
<li><strong><code>key_pair_name</code></strong>: Constructs a unique key name with a prefix and region.  </li>
<li><strong><code>openvpn_user</code></strong>: Creates a unique username for OpenVPN based on the region.  </li>
<li><strong><code>region_display</code></strong>: Formats a list of available AWS regions for display purposes.  </li>
</ul>
<hr>
<p><mark><strong>tls_private_key Resource</strong></mark>  </p>
<p>Generates a 2048-bit RSA private key used to create an AWS key pair.  </p>
<hr>
<p><mark><strong>aws_key_pair Resource</strong></mark>  </p>
<p>Creates an SSH key pair in AWS.  </p>
<ul>
<li><strong><code>key_name</code></strong>: Uses the locally defined key pair name.  </li>
<li><strong><code>public_key</code></strong>: Sets the public key from the generated private key.  </li>
<li><strong><code>tags</code></strong>: Adds metadata for the key pair, such as the project name and creation method.  </li>
</ul>
<hr>
<p><mark><strong>local_file Resource</strong></mark>  </p>
<p>Stores the generated private key securely on the local machine.  </p>
<ul>
<li><strong><code>content</code></strong>: Saves the private key in PEM format.  </li>
<li><strong><code>filename</code></strong>: Names the file using the key pair name and <code>.pem</code> extension.  </li>
<li><strong><code>file_permission</code></strong>: Sets restrictive permissions (<code>0400</code>) for security.  </li>
</ul>
<hr>
<p><mark><strong>null_resource for Region Display</strong></mark>  </p>
<p>A helper resource to print available AWS regions to the console.  </p>
<ul>
<li><strong><code>triggers</code></strong>: Ensures the resource runs every time by using the current timestamp.  </li>
<li><strong><code>provisioner "local-exec"</code></strong>: Executes a script that prints available AWS regions and the selected region's details.  </li>
</ul>
<hr>
</details>
<details class="tip">
<summary>The <code>openvpn_userdata.tpl</code> file</summary>
<details class="code-file" open="open">
<summary>openvpn_userdata.tpl</summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span>
<span class="normal"><a href="#__codelineno-2-31">31</a></span>
<span class="normal"><a href="#__codelineno-2-32">32</a></span>
<span class="normal"><a href="#__codelineno-2-33">33</a></span>
<span class="normal"><a href="#__codelineno-2-34">34</a></span>
<span class="normal"><a href="#__codelineno-2-35">35</a></span>
<span class="normal"><a href="#__codelineno-2-36">36</a></span>
<span class="normal"><a href="#__codelineno-2-37">37</a></span>
<span class="normal"><a href="#__codelineno-2-38">38</a></span>
<span class="normal"><a href="#__codelineno-2-39">39</a></span>
<span class="normal"><a href="#__codelineno-2-40">40</a></span>
<span class="normal"><a href="#__codelineno-2-41">41</a></span>
<span class="normal"><a href="#__codelineno-2-42">42</a></span>
<span class="normal"><a href="#__codelineno-2-43">43</a></span>
<span class="normal"><a href="#__codelineno-2-44">44</a></span>
<span class="normal"><a href="#__codelineno-2-45">45</a></span>
<span class="normal"><a href="#__codelineno-2-46">46</a></span>
<span class="normal"><a href="#__codelineno-2-47">47</a></span>
<span class="normal"><a href="#__codelineno-2-48">48</a></span>
<span class="normal"><a href="#__codelineno-2-49">49</a></span>
<span class="normal"><a href="#__codelineno-2-50">50</a></span>
<span class="normal"><a href="#__codelineno-2-51">51</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="c1"># Bash script to intialize OpenVPN Server</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="c1"># Set error trap to exit the script immediately on first error.</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="nb">set</span><span class="w"> </span>-e<span class="w"> </span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="c1"># Log all output to a file for reference </span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="nb">exec</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>/var/log/setup_script.log<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Initializing script..."</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="nb">echo</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Updating packages..."</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a>sudo<span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span>-y
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="nb">echo</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Setting FQDN  &amp; Public IP"</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="nb">echo</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="nv">FQDN</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-sS<span class="w"> </span>http://169.254.169.254/latest/meta-data/public-hostname<span class="k">)</span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="nv">PUB_IP</span><span class="o">=</span><span class="k">$(</span>curl<span class="w"> </span>-sS<span class="w"> </span>http://169.254.169.254/latest/meta-data/public-ipv4<span class="k">)</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="nv">$FQDN</span><span class="s2">"</span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="nb">echo</span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"</span><span class="nv">$PUB_IP</span><span class="s2">"</span>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="nb">echo</span><span class="w"> </span>
<a id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Download installation script"</span>
<a id="__codelineno-2-27" name="__codelineno-2-27"></a><span class="nb">echo</span>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a><span class="c1"># Check Agristan's repo for full details on installation script options- https://github.com/angristan/openvpn-install</span>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a>wget<span class="w"> </span>https://raw.githubusercontent.com/angristan/openvpn-install/master/openvpn-install.sh<span class="w"> </span>-O<span class="w"> </span>openvpn-install.sh
<a id="__codelineno-2-31" name="__codelineno-2-31"></a>chmod<span class="w"> </span>+x<span class="w"> </span>openvpn-install.sh<span class="w"> </span>
<a id="__codelineno-2-32" name="__codelineno-2-32"></a>
<a id="__codelineno-2-33" name="__codelineno-2-33"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Installing OpenVPN Access Server..."</span>
<a id="__codelineno-2-34" name="__codelineno-2-34"></a><span class="nb">echo</span>
<a id="__codelineno-2-35" name="__codelineno-2-35"></a>sudo<span class="w"> </span><span class="nv">AUTO_INSTALL</span><span class="o">=</span>y<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-2-36" name="__codelineno-2-36"></a><span class="w">    </span><span class="nv">APPROVE_IP</span><span class="o">=</span><span class="nv">$PUB_IP</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-2-37" name="__codelineno-2-37"></a><span class="w">    </span><span class="nv">ENDPOINT</span><span class="o">=</span><span class="nv">$FQDN</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-2-38" name="__codelineno-2-38"></a><span class="w">    </span><span class="nv">CLIENT</span><span class="o">=</span><span class="si">${</span><span class="nv">openvpn_user</span><span class="si">}</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-2-39" name="__codelineno-2-39"></a><span class="w">    </span>./openvpn-install.sh
<a id="__codelineno-2-40" name="__codelineno-2-40"></a>
<a id="__codelineno-2-41" name="__codelineno-2-41"></a>
<a id="__codelineno-2-42" name="__codelineno-2-42"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Moving User Profile </span><span class="si">${</span><span class="nv">openvpn_user</span><span class="si">}</span><span class="s2">.ovpn to the Ubuntu user home directory..."</span>
<a id="__codelineno-2-43" name="__codelineno-2-43"></a><span class="nb">echo</span>
<a id="__codelineno-2-44" name="__codelineno-2-44"></a>mv<span class="w"> </span>/root/<span class="si">${</span><span class="nv">openvpn_user</span><span class="si">}</span>.ovpn<span class="w"> </span>/home/ubuntu/<span class="si">${</span><span class="nv">openvpn_user</span><span class="si">}</span>.ovpn
<a id="__codelineno-2-45" name="__codelineno-2-45"></a>
<a id="__codelineno-2-46" name="__codelineno-2-46"></a><span class="nb">echo</span>
<a id="__codelineno-2-47" name="__codelineno-2-47"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Hurray! OpenVPN Installed succesfully"</span>
<a id="__codelineno-2-48" name="__codelineno-2-48"></a>
<a id="__codelineno-2-49" name="__codelineno-2-49"></a><span class="c1"># Rename Hostname</span>
<a id="__codelineno-2-50" name="__codelineno-2-50"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">"Set hostname as OpenVPN-Server..."</span>
<a id="__codelineno-2-51" name="__codelineno-2-51"></a>sudo<span class="w"> </span>hostnamectl<span class="w"> </span>set-hostname<span class="w"> </span>OpenVPN-Server<span class="w"> </span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<p>This is the userdata script that is used to bootstrap the server immediately after it is provisioned by Terraform. It is configured as a template file so that terraform can interpolate the value of <code>openvpn_user</code> variable from the variables declared in the config file into the user_data script.</p>
<p>How it works:</p>
<ul>
<li>
<p>Sets bash environment and error handling</p>
</li>
<li>
<p>Captures all the setup process in the log file <code>/var/log/setup_script.log</code> so it can be referenced if there are errors </p>
</li>
<li>
<p>Updates system packages</p>
</li>
<li>
<p>Retrieves instance metadata (FQDN and Public IP) from AWS metadata service which will be needed by the OpenVPN installatin script</p>
</li>
<li>
<p>Downloads the installation script from <a href="https://github.com/angristan/openvpn-install" target="_blank">Angristan's GitHub repository</a>  and sets the executable permissions on the file</p>
</li>
<li>
<p>Runs the installation script configuration automatically without prompts using the "Public IP" and "FQDN" values queried from the instance metadata</p>
</li>
<li>
<p>Sets the Custom client name (from variable ${openvpn_user})</p>
</li>
<li>
<p>Moves the generated client profile (.ovpn file) to Ubuntu user's home directory</p>
</li>
<li>
<p>Sets the system hostname to "OpenVPN-Server"</p>
</li>
</ul>
<p><mark><strong>Each section of the file is explained below:</strong></mark></p>
<p><mark><strong>Shebang and Setup</strong></mark>  </p>
<ul>
<li><strong><code>#!/bin/bash</code></strong>: Specifies the script should run using the Bash shell.  </li>
<li><strong><code>set -e</code></strong>: Ensures the script exits immediately if any command fails, preventing incomplete setups.  </li>
<li><strong><code>exec &gt;&gt; /var/log/setup_script.log 2&gt;&amp;1</code></strong>: Redirects all script output (standard and error) to a log file for debugging and reference.</li>
</ul>
<hr>
<p><mark><strong>Logging Initialization and Updates</strong></mark>  </p>
<ul>
<li><strong><code>echo "Initializing script..."</code></strong>: Provides a visual indicator that the script has started.  </li>
<li><strong><code>sudo apt update -y</code></strong>: Updates package lists to ensure the system has the latest available versions.</li>
</ul>
<hr>
<p><mark><strong>Retrieve and Display Instance Metadata</strong></mark>  </p>
<ul>
<li><strong><code>FQDN=$(curl -sS http://169.254.169.254/latest/meta-data/public-hostname)</code></strong>: Retrieves the Fully Qualified Domain Name (FQDN) of the instance from AWS metadata.  </li>
<li><strong><code>PUB_IP=$(curl -sS http://169.254.169.254/latest/meta-data/public-ipv4)</code></strong>: Retrieves the public IPv4 address of the instance from AWS metadata.  </li>
<li><strong><code>echo "$FQDN"</code> &amp; <code>echo "$PUB_IP"</code></strong>: Prints the FQDN and public IP to the console for verification.</li>
</ul>
<hr>
<p><mark><strong>Download and Prepare OpenVPN Installation Script</strong></mark>  </p>
<ul>
<li><strong><code>wget https://raw.githubusercontent.com/angristan/openvpn-install/master/openvpn-install.sh -O openvpn-install.sh</code></strong>: Downloads the OpenVPN installation script from Angristan’s GitHub repository.  </li>
<li><strong><code>chmod +x openvpn-install.sh</code></strong>: Makes the script executable.</li>
</ul>
<hr>
<p><mark><strong>Install OpenVPN</strong></mark>  </p>
<ul>
<li><strong><code>sudo AUTO_INSTALL=y \</code></strong>: Enables automatic installation with predefined options.  </li>
<li><strong><code>APPROVE_IP=$PUB_IP \</code></strong>: Uses the retrieved public IP for OpenVPN configuration.  </li>
<li><strong><code>ENDPOINT=$FQDN \</code></strong>: Sets the FQDN as the server endpoint.  </li>
<li><strong><code>CLIENT=${openvpn_user} \</code></strong>: Configures the OpenVPN client with a specified username.  </li>
<li><strong><code>./openvpn-install.sh</code></strong>: Executes the installation script.</li>
</ul>
<hr>
<p><mark><strong>Move User Configuration File</strong></mark>  </p>
<ul>
<li><strong><code>mv /root/${openvpn_user}.ovpn /home/ubuntu/${openvpn_user}.ovpn</code></strong>: Moves the generated client profile (<code>.ovpn</code> file) to the default user’s home directory for easier access.</li>
</ul>
<hr>
<p><mark><strong>Post-Installation Messages and Cleanup</strong></mark> </p>
<ul>
<li><strong><code>echo "Hurray! OpenVPN Installed successfully"</code></strong>: Prints a success message to indicate completion.  </li>
<li><strong><code>sudo hostnamectl set-hostname OpenVPN-Server</code></strong>: Changes the system’s hostname to "OpenVPN-Server" for easy identification.</li>
</ul>
</details>
<details class="tip">
<summary>The <code>outputs.tf</code> file</summary>
<details class="code-file" open="open">
<summary>outputs.tf</summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span>
<span class="normal"><a href="#__codelineno-3-28">28</a></span>
<span class="normal"><a href="#__codelineno-3-29">29</a></span>
<span class="normal"><a href="#__codelineno-3-30">30</a></span>
<span class="normal"><a href="#__codelineno-3-31">31</a></span>
<span class="normal"><a href="#__codelineno-3-32">32</a></span>
<span class="normal"><a href="#__codelineno-3-33">33</a></span>
<span class="normal"><a href="#__codelineno-3-34">34</a></span>
<span class="normal"><a href="#__codelineno-3-35">35</a></span>
<span class="normal"><a href="#__codelineno-3-36">36</a></span>
<span class="normal"><a href="#__codelineno-3-37">37</a></span>
<span class="normal"><a href="#__codelineno-3-38">38</a></span>
<span class="normal"><a href="#__codelineno-3-39">39</a></span>
<span class="normal"><a href="#__codelineno-3-40">40</a></span>
<span class="normal"><a href="#__codelineno-3-41">41</a></span>
<span class="normal"><a href="#__codelineno-3-42">42</a></span>
<span class="normal"><a href="#__codelineno-3-43">43</a></span>
<span class="normal"><a href="#__codelineno-3-44">44</a></span>
<span class="normal"><a href="#__codelineno-3-45">45</a></span>
<span class="normal"><a href="#__codelineno-3-46">46</a></span>
<span class="normal"><a href="#__codelineno-3-47">47</a></span>
<span class="normal"><a href="#__codelineno-3-48">48</a></span>
<span class="normal"><a href="#__codelineno-3-49">49</a></span>
<span class="normal"><a href="#__codelineno-3-50">50</a></span>
<span class="normal"><a href="#__codelineno-3-51">51</a></span>
<span class="normal"><a href="#__codelineno-3-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1"># Output values for OpenVPN Server</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="kr">output</span><span class="w"> </span><span class="nv">"OpenVPN-Public-ip-address"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Public ip address of the OpenVPN server"</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_instance.OpenVPN_Server.public_ip</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="p">}</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="c1"># Display the instance-ID of the OpenVPN Server</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="kr">output</span><span class="w"> </span><span class="nv">"OpenVPN-instance-id"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Instance id of the OpenVPN Server"</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_instance.OpenVPN_Server.id</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="p">}</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="c1"># Display the instance-ID of the OpenVPN Server</span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="kr">output</span><span class="w"> </span><span class="nv">"key_pair_name"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Name of the created key pair"</span>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="na">value</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">local.key_pair_name</span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="p">}</span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a><span class="c1"># Display the path of the private key file</span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a><span class="kr">output</span><span class="w"> </span><span class="nv">"private_key_path"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Path to the private key file"</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="na">value</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">local_file.private_key.filename</span>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a><span class="p">}</span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a><span class="c1"># Dispaly the ssh connection string</span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a><span class="kr">output</span><span class="w"> </span><span class="nv">"ssh_connection_string"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SSH connection string"</span>
<a id="__codelineno-3-28" name="__codelineno-3-28"></a><span class="na">value</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"ssh -i ${local_file.private_key.filename} ubuntu@${aws_instance.OpenVPN_Server.public_ip}"</span>
<a id="__codelineno-3-29" name="__codelineno-3-29"></a><span class="p">}</span>
<a id="__codelineno-3-30" name="__codelineno-3-30"></a>
<a id="__codelineno-3-31" name="__codelineno-3-31"></a><span class="c1"># Display the path of the downloaded ovpn profile config file</span>
<a id="__codelineno-3-32" name="__codelineno-3-32"></a><span class="kr">output</span><span class="w"> </span><span class="nv">"ovpn_config_path"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-33" name="__codelineno-3-33"></a><span class="na">value</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s2">"./${local.openvpn_user}.ovpn"</span>
<a id="__codelineno-3-34" name="__codelineno-3-34"></a><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Path to the downloaded OpenVPN config file"</span>
<a id="__codelineno-3-35" name="__codelineno-3-35"></a><span class="p">}</span>
<a id="__codelineno-3-36" name="__codelineno-3-36"></a>
<a id="__codelineno-3-37" name="__codelineno-3-37"></a><span class="c1"># Display the path of the downloaded ovpn profile config fil</span>
<a id="__codelineno-3-38" name="__codelineno-3-38"></a><span class="kr">output</span><span class="w"> </span><span class="nv">"ovpn_download_complete"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-39" name="__codelineno-3-39"></a><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"OpenVPN Profile config file has been downloaded to: ${local.openvpn_user}.ovpn"</span>
<a id="__codelineno-3-40" name="__codelineno-3-40"></a><span class="p">}</span>
<a id="__codelineno-3-41" name="__codelineno-3-41"></a>
<a id="__codelineno-3-42" name="__codelineno-3-42"></a><span class="c1"># Display the next step to access the VPN server</span>
<a id="__codelineno-3-43" name="__codelineno-3-43"></a><span class="kr">output</span><span class="w"> </span><span class="nv">"Next_Steps"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-44" name="__codelineno-3-44"></a><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;&lt;-</span><span class="dl">EOT</span>
<a id="__codelineno-3-45" name="__codelineno-3-45"></a><span class="sh">    To use your OpenVPN configuration:</span>
<a id="__codelineno-3-46" name="__codelineno-3-46"></a><span class="sh">    1. Download and Install the OpenVPN Connect client software on your device from here: https://openvpn.net/client/</span>
<a id="__codelineno-3-47" name="__codelineno-3-47"></a><span class="sh">    2. Import the configuration file: ${local.openvpn_user}.ovpn</span>
<a id="__codelineno-3-48" name="__codelineno-3-48"></a><span class="sh">    3. Connect to your VPN server</span>
<a id="__codelineno-3-49" name="__codelineno-3-49"></a>
<a id="__codelineno-3-50" name="__codelineno-3-50"></a><span class="sh">    The configuration file is located at: ./${local.openvpn_user}.ovpn</span>
<a id="__codelineno-3-51" name="__codelineno-3-51"></a><span class="dl">EOT</span>
<a id="__codelineno-3-52" name="__codelineno-3-52"></a><span class="p">}</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<p>The <code>outputs.tf</code> file defines values that will be displayed after Terraform completes its execution. In this specific file, it outputs:</p>
<p>The following values will be displayed:</p>
<ul>
<li>
<p>Public IP address of the OpenVPN server</p>
</li>
<li>
<p>Instance ID of the server</p>
</li>
<li>
<p>Key pair name used for SSH access</p>
</li>
<li>
<p>Details on how to access the VPN server </p>
</li>
<li>
<p>Path to the private key file that was created</p>
</li>
<li>
<p>SSH connection string (ready to use command for connecting to the server)</p>
</li>
<li>
<p>Location of the downloaded OpenVPN profile (.ovpn file)</p>
</li>
<li>
<p>Next Steps Instructions</p>
</li>
</ul>
<p>These outputs help users understand where important files are located and what steps to take next after the infrastructure is deployed.</p>
</details>
<details class="tip">
<summary>The <code>ovpn.tf</code> file</summary>
<details class="code-file" open="open">
<summary>ovpn.tf</summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span>
<span class="normal"><a href="#__codelineno-4-26">26</a></span>
<span class="normal"><a href="#__codelineno-4-27">27</a></span>
<span class="normal"><a href="#__codelineno-4-28">28</a></span>
<span class="normal"><a href="#__codelineno-4-29">29</a></span>
<span class="normal"><a href="#__codelineno-4-30">30</a></span>
<span class="normal"><a href="#__codelineno-4-31">31</a></span>
<span class="normal"><a href="#__codelineno-4-32">32</a></span>
<span class="normal"><a href="#__codelineno-4-33">33</a></span>
<span class="normal"><a href="#__codelineno-4-34">34</a></span>
<span class="normal"><a href="#__codelineno-4-35">35</a></span>
<span class="normal"><a href="#__codelineno-4-36">36</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1"># Wait for OpenVPN installation and download the profile config file</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">"null_resource"</span><span class="w"> </span><span class="nv">"get_ovpn_config"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="na">depends_on</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nv">aws_instance.OpenVPN_Server</span><span class="p">]</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="c1"># Trigger this resource when instance IP changes</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="nb">triggers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">    </span><span class="na">instance_ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_instance.OpenVPN_Server.public_ip</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">    </span><span class="na">ovpn_file</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"${local.openvpn_user}.ovpn"</span><span class="c1">  # Store filename in triggers</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="p">}</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="c1"># Wait for OpenVPN installation to complete and file to be created</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="kr">provisioner</span><span class="w"> </span><span class="nv">"remote-exec"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">    </span><span class="na">inline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">    </span><span class="s2">"while [ ! -f /home/ubuntu/${local.openvpn_user}.ovpn ]; do sleep 20; echo 'Waiting for OpenVPN config file...'; done"</span><span class="p">,</span>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">    </span><span class="s2">"echo 'OpenVPN config file is ready!'"</span>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a><span class="w">    </span><span class="p">]</span>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">    </span><span class="nb">connection</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="w">    </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"ssh"</span>
<a id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="w">    </span><span class="na">user</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">"ubuntu"</span>
<a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="w">    </span><span class="na">private_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">tls_private_key.key_pair.private_key_pem</span>
<a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="w">    </span><span class="na">host</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_instance.OpenVPN_Server.public_ip</span>
<a id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="p">}</span>
<a id="__codelineno-4-25" name="__codelineno-4-25"></a>
<a id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="c1"># Download the OpenVPN profile config file</span>
<a id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="kr">provisioner</span><span class="w"> </span><span class="nv">"local-exec"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-28" name="__codelineno-4-28"></a><span class="w">    </span><span class="na">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"scp -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -i ${local_file.private_key.filename} ubuntu@${aws_instance.OpenVPN_Server.public_ip}:/home/ubuntu/${local.openvpn_user}.ovpn ./${local.openvpn_user}.ovpn"</span>
<a id="__codelineno-4-29" name="__codelineno-4-29"></a><span class="p">}</span>
<a id="__codelineno-4-30" name="__codelineno-4-30"></a>
<a id="__codelineno-4-31" name="__codelineno-4-31"></a><span class="c1"># Clean up the .ovpn file after destroy</span>
<a id="__codelineno-4-32" name="__codelineno-4-32"></a><span class="kr">provisioner</span><span class="w"> </span><span class="nv">"local-exec"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-33" name="__codelineno-4-33"></a><span class="w">    </span><span class="na">when</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="err">destroy</span>
<a id="__codelineno-4-34" name="__codelineno-4-34"></a><span class="w">    </span><span class="na">command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rm -f ./${self.triggers.ovpn_file}"</span>
<a id="__codelineno-4-35" name="__codelineno-4-35"></a><span class="p">}</span>
<a id="__codelineno-4-36" name="__codelineno-4-36"></a><span class="p">}</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<p>The <code>ovpn.tf</code> file manages the retrieval of the OpenVPN configuration file from the remote VPN server and donwloads it in the terraform working directory. The main purpose of this file is to ensure you get the OpenVPN client configuration file automatically downloaded to your local machine once it's ready on the server.</p>
<p>Here’s a breakdown of each section of this file:</p>
<p><mark><strong>Resource Definition</strong></mark></p>
<ul>
<li><strong><code>null_resource "get_ovpn_config"</code></strong>: A helper resource used to wait for the OpenVPN configuration file to be generated, then download it locally. This resource doesn't create infrastructure directly but adds automation to the deployment process.</li>
</ul>
<hr>
<p><mark><strong>Dependency and Trigger Configuration</strong></mark></p>
<ul>
<li><strong><code>depends_on = [aws_instance.OpenVPN_Server]</code></strong>: Ensures this resource executes only after the OpenVPN server instance is successfully created.</li>
<li><strong><code>triggers</code></strong>:  </li>
<li><strong><code>instance_ip</code></strong>: Ensures the resource is re-applied if the public IP of the OpenVPN server changes.  </li>
<li><strong><code>ovpn_file</code></strong>: Tracks the expected <code>.ovpn</code> configuration filename as a trigger, ensuring changes to this filename will trigger re-execution.</li>
</ul>
<hr>
<p><mark><strong>Remote Execution Provisioner</strong></mark></p>
<ul>
<li><strong><code>provisioner "remote-exec"</code></strong>: Executes commands on the OpenVPN server to ensure the <code>.ovpn</code> configuration file is ready.  </li>
</ul>
<p><strong><code>inline</code></strong>: </p>
<p>Contains the commands to:</p>
<ul>
<li><strong><code>while [ ! -f /home/ubuntu/... ]; do</code></strong>: Polls the server every 20 seconds, checking if the <code>.ovpn</code> file exists.  </li>
<li><strong><code>echo 'Waiting for OpenVPN config file...'</code></strong>: Prints a message during the wait loop.  </li>
<li><strong><code>echo 'OpenVPN config file is ready!'</code></strong>: Signals the file is available.  </li>
</ul>
<p><strong><code>connection</code></strong>: Defines SSH connection details:</p>
<ul>
<li><strong><code>type</code></strong>: Specifies SSH as the connection type.  </li>
<li><strong><code>user</code></strong>: Specifies the user (<code>ubuntu</code>) to connect with.  </li>
<li><strong><code>private_key</code></strong>: Uses the private key generated earlier for authentication.  </li>
<li><strong><code>host</code></strong>: Specifies the public IP of the OpenVPN server instance.</li>
</ul>
<hr>
<p><mark><strong>Local Execution Provisioner</strong></mark></p>
<ul>
<li><strong>First <code>local-exec</code> block</strong>: Downloads the <code>.ovpn</code> file to the local machine.  </li>
<li><strong><code>scp</code></strong>: Securely copies the file from the OpenVPN server to the local directory.  </li>
</ul>
<p><strong>Options</strong>:</p>
<ul>
<li><strong><code>-o StrictHostKeyChecking=no</code></strong>: Disables host key checking to avoid interactive prompts.  </li>
<li><strong><code>-o UserKnownHostsFile=/dev/null</code></strong>: Prevents updates to the local known hosts file.  </li>
<li><strong><code>-i</code></strong>: Specifies the SSH private key for authentication.  </li>
</ul>
<hr>
<p><mark><strong>Cleanup on Resource Destruction</strong></mark></p>
<ul>
<li><strong>Second <code>local-exec</code> block</strong>: Deletes the downloaded <code>*.ovpn</code> file when the resource is destroyed during the terraform cleanup phase.  </li>
<li><strong><code>when = destroy</code></strong>: Ensures the command is only executed during the resource destruction phase.  </li>
<li><strong><code>rm -f ./${self.triggers.ovpn_file}</code></strong>: Removes the file using the name stored in the triggers.</li>
</ul>
<hr>
<p><mark><strong>Overall Function</strong></mark></p>
<p>This file ensures that the OpenVPN profile configuration file is created on the server, securely downloads it to the local system, and removes it when no longer needed (when the <code>terraform destroy</code> command is run). It integrates waiting, remote command execution, and local file operations seamlessly within the Terraform workflow.</p>
</details>
<details class="tip">
<summary>The <code>provider.tf</code> file</summary>
<details class="code-file" open="open">
<summary>provider.tf</summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span>
<span class="normal"><a href="#__codelineno-5-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="c1"># </span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="nb">terraform</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="nb">required_providers</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="nb">aws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">    </span><span class="na">source</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"hashicorp/aws"</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">    </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"~&gt; 5.0"</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="nb">local</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">    </span><span class="na">source</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"hashicorp/local"</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">    </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"~&gt; 2.0"</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">    </span><span class="nb">tls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">    </span><span class="na">source</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"hashicorp/tls"</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">    </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"~&gt; 4.0"</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">    </span><span class="nb">null</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="w">    </span><span class="na">source</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"hashicorp/null"</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="w">    </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"~&gt; 3.0"</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="p">}</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="na">required_version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"&gt;= 1.2.0"</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="p">}</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="c1"># Configure the AWS Provider</span>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a><span class="kr">provider</span><span class="w"> </span><span class="nv">"aws"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-26" name="__codelineno-5-26"></a><span class="na">region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"${var.selected_region}"</span>
<a id="__codelineno-5-27" name="__codelineno-5-27"></a><span class="p">}</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<p>The file essentially sets up the foundational configuration sources and versions needed for Terraform to interact with AWS and to use other necessary providers for the OpenVPN deployment. </p>
</details>
<details class="tip">
<summary>The <code>securityGrp.tf</code> file</summary>
<details class="code-file" open="open">
<summary>securityGrp.tf</summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span>
<span class="normal"><a href="#__codelineno-6-22">22</a></span>
<span class="normal"><a href="#__codelineno-6-23">23</a></span>
<span class="normal"><a href="#__codelineno-6-24">24</a></span>
<span class="normal"><a href="#__codelineno-6-25">25</a></span>
<span class="normal"><a href="#__codelineno-6-26">26</a></span>
<span class="normal"><a href="#__codelineno-6-27">27</a></span>
<span class="normal"><a href="#__codelineno-6-28">28</a></span>
<span class="normal"><a href="#__codelineno-6-29">29</a></span>
<span class="normal"><a href="#__codelineno-6-30">30</a></span>
<span class="normal"><a href="#__codelineno-6-31">31</a></span>
<span class="normal"><a href="#__codelineno-6-32">32</a></span>
<span class="normal"><a href="#__codelineno-6-33">33</a></span>
<span class="normal"><a href="#__codelineno-6-34">34</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="c1"># OpenVPN Server Security Group</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">"aws_security_group"</span><span class="w"> </span><span class="nv">"openvpn_SG"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="na">name_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"${var.project_name}_openvpn_SG_"</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"OpeyemiTechPro OpenVPN Security Group"</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="err">dynamic</span><span class="w"> </span><span class="s2">"ingress"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">    </span><span class="na">for_each</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.openvpn_tcp_ports</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">    </span><span class="nb">content</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w">    </span><span class="na">from_port</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">ingress.key</span>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">    </span><span class="na">to_port</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">ingress.key</span>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="w">    </span><span class="na">protocol</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"tcp"</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">    </span><span class="na">cidr_blocks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"0.0.0.0/0"</span><span class="p">]</span>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">    </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">ingress.value</span>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="p">}</span>
<a id="__codelineno-6-16" name="__codelineno-6-16"></a>
<a id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="err">dynamic</span><span class="w"> </span><span class="s2">"ingress"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="w">    </span><span class="na">for_each</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.openvpn_udp_ports</span>
<a id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="w">    </span><span class="nb">content</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="w">    </span><span class="na">from_port</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">ingress.key</span>
<a id="__codelineno-6-21" name="__codelineno-6-21"></a><span class="w">    </span><span class="na">to_port</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nv">ingress.key</span>
<a id="__codelineno-6-22" name="__codelineno-6-22"></a><span class="w">    </span><span class="na">protocol</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"udp"</span>
<a id="__codelineno-6-23" name="__codelineno-6-23"></a><span class="w">    </span><span class="na">cidr_blocks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"0.0.0.0/0"</span><span class="p">]</span>
<a id="__codelineno-6-24" name="__codelineno-6-24"></a><span class="w">    </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">ingress.value</span>
<a id="__codelineno-6-25" name="__codelineno-6-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-26" name="__codelineno-6-26"></a><span class="p">}</span><span class="w">  </span>
<a id="__codelineno-6-27" name="__codelineno-6-27"></a>
<a id="__codelineno-6-28" name="__codelineno-6-28"></a><span class="nb">egress</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-29" name="__codelineno-6-29"></a><span class="w">    </span><span class="na">from_port</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<a id="__codelineno-6-30" name="__codelineno-6-30"></a><span class="w">    </span><span class="na">to_port</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<a id="__codelineno-6-31" name="__codelineno-6-31"></a><span class="w">    </span><span class="na">protocol</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">"-1"</span>
<a id="__codelineno-6-32" name="__codelineno-6-32"></a><span class="w">    </span><span class="na">cidr_blocks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"0.0.0.0/0"</span><span class="p">]</span>
<a id="__codelineno-6-33" name="__codelineno-6-33"></a><span class="p">}</span>
<a id="__codelineno-6-34" name="__codelineno-6-34"></a><span class="p">}</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<p>This configures the required security group profile for the OpenVPN server. It opens the required ports for ingress and egress and the neccesary port protocols (tcp and udp).</p>
<p><mark>The sections of the securityGrp.tf file are explained breifly below:</mark></p>
<p><mark><strong>Resource Definition</strong></mark></p>
<ul>
<li><strong><code>resource "aws_security_group" "openvpn_SG"</code></strong>: Creates a security group in AWS to define network access rules for the OpenVPN server.</li>
</ul>
<hr>
<p><mark><strong>Security Group Naming and Description</strong></mark></p>
<ul>
<li><strong><code>name_prefix</code></strong>: Sets a prefix for the security group name, combining the project name (<code>var.project_name</code>) with <code>_openvpn_SG_</code>. AWS appends a unique identifier to the prefix.</li>
<li><strong><code>description</code></strong>: Provides a description for the security group, indicating its purpose (OpenVPN security).</li>
</ul>
<hr>
<p><mark><strong>Dynamic Ingress Rules for TCP Ports</strong></mark></p>
<p><strong><code>dynamic "ingress"</code> (first block)</strong>:</p>
<ul>
<li><strong><code>for_each = var.openvpn_tcp_ports</code></strong>: Iterates over a map of TCP ports and descriptions provided in the variable <code>var.openvpn_tcp_ports</code>.</li>
</ul>
<p><strong><code>content {}</code></strong>: Defines the content of each rule:</p>
<ul>
<li><strong><code>from_port</code> and <code>to_port</code></strong>: Sets the port range for the rule, using the key from the iteration (<code>ingress.key</code>).</li>
<li><strong><code>protocol = "tcp"</code></strong>: Specifies that the rule applies to TCP traffic.</li>
<li><strong><code>cidr_blocks = ["0.0.0.0/0"]</code></strong>: Allows traffic from all IP addresses.</li>
<li><strong><code>description = ingress.value</code></strong>: Provides a description for the rule, using the value from the iteration.</li>
</ul>
<hr>
<p><mark><strong>Dynamic Ingress Rules for UDP Ports</strong></mark></p>
<p><strong><code>dynamic "ingress"</code> (second block)</strong>:</p>
<ul>
<li>Similar to the first block, but applies to <strong>UDP traffic</strong>.</li>
<li>Iterates over the variable <code>var.openvpn_udp_ports</code>, which contains a map of UDP ports and their descriptions.</li>
</ul>
<hr>
<p><mark><strong>Egress Rules</strong></mark></p>
<p><strong><code>egress</code> block</strong>:</p>
<ul>
<li><strong><code>from_port = 0</code> and <code>to_port = 0</code></strong>: Allows all outbound traffic across all port ranges.</li>
<li><strong><code>protocol = "-1"</code></strong>: Applies the rule to all protocols.</li>
<li><strong><code>cidr_blocks = ["0.0.0.0/0"]</code></strong>: Allows traffic to all IP addresses.</li>
</ul>
<hr>
<p><mark><strong>Overall Function</strong></mark></p>
<p>This security group:</p>
<ol>
<li>Dynamically creates ingress (inbound) rules for both TCP and UDP traffic based on user-defined ports and descriptions (<code>var.openvpn_tcp_ports</code> and <code>var.openvpn_udp_ports</code>).</li>
<li>Configures unrestricted egress (outbound) traffic to allow the OpenVPN server to communicate with any destination.</li>
<li>Ensures that all rules are flexible and easy to manage via Terraform variables, making it adaptable for different use cases.</li>
</ol>
</details>
<details class="tip">
<summary>The <code>terraform.tfvars</code> file</summary>
<details class="code-file" open="open">
<summary>terraform.tfvars</summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span>
<span class="normal"><a href="#__codelineno-7-16">16</a></span>
<span class="normal"><a href="#__codelineno-7-17">17</a></span>
<span class="normal"><a href="#__codelineno-7-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="c1"># Project Details</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="na">project_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Opeyemi_OpenVPN_YT"</span>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="c1"># Variables for OpenVPN Server</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="na">OpenVPN_instance_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"t2.micro"</span>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8"></a><span class="c1"># OpenVPN Server port Details</span>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="nb">openvpn_tcp_ports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="s2">"22"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"SSH Access"</span>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a><span class="s2">"80"</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">"HTTP Access"</span>
<a id="__codelineno-7-12" name="__codelineno-7-12"></a><span class="s2">"443"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"HTTPS Access"</span><span class="w"> </span>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="s2">"943"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"OpenVPN Management Port"</span>
<a id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="p">}</span>
<a id="__codelineno-7-15" name="__codelineno-7-15"></a>
<a id="__codelineno-7-16" name="__codelineno-7-16"></a><span class="nb">openvpn_udp_ports</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-17" name="__codelineno-7-17"></a><span class="s2">"1194"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"OpenVPN udp Port"</span>
<a id="__codelineno-7-18" name="__codelineno-7-18"></a><span class="p">}</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<p>Here, values are assigned to all the declared variables in the config script.  You can freely change any values here to customize the script for your own purpose</p>
</details>
<details class="tip">
<summary>The <code>variables.tf</code> file</summary>
<details class="code-file" open="open">
<summary>variables.tf</summary>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span>
<span class="normal"><a href="#__codelineno-8-18">18</a></span>
<span class="normal"><a href="#__codelineno-8-19">19</a></span>
<span class="normal"><a href="#__codelineno-8-20">20</a></span>
<span class="normal"><a href="#__codelineno-8-21">21</a></span>
<span class="normal"><a href="#__codelineno-8-22">22</a></span>
<span class="normal"><a href="#__codelineno-8-23">23</a></span>
<span class="normal"><a href="#__codelineno-8-24">24</a></span>
<span class="normal"><a href="#__codelineno-8-25">25</a></span>
<span class="normal"><a href="#__codelineno-8-26">26</a></span>
<span class="normal"><a href="#__codelineno-8-27">27</a></span>
<span class="normal"><a href="#__codelineno-8-28">28</a></span>
<span class="normal"><a href="#__codelineno-8-29">29</a></span>
<span class="normal"><a href="#__codelineno-8-30">30</a></span>
<span class="normal"><a href="#__codelineno-8-31">31</a></span>
<span class="normal"><a href="#__codelineno-8-32">32</a></span>
<span class="normal"><a href="#__codelineno-8-33">33</a></span>
<span class="normal"><a href="#__codelineno-8-34">34</a></span>
<span class="normal"><a href="#__codelineno-8-35">35</a></span>
<span class="normal"><a href="#__codelineno-8-36">36</a></span>
<span class="normal"><a href="#__codelineno-8-37">37</a></span>
<span class="normal"><a href="#__codelineno-8-38">38</a></span>
<span class="normal"><a href="#__codelineno-8-39">39</a></span>
<span class="normal"><a href="#__codelineno-8-40">40</a></span>
<span class="normal"><a href="#__codelineno-8-41">41</a></span>
<span class="normal"><a href="#__codelineno-8-42">42</a></span>
<span class="normal"><a href="#__codelineno-8-43">43</a></span>
<span class="normal"><a href="#__codelineno-8-44">44</a></span>
<span class="normal"><a href="#__codelineno-8-45">45</a></span>
<span class="normal"><a href="#__codelineno-8-46">46</a></span>
<span class="normal"><a href="#__codelineno-8-47">47</a></span>
<span class="normal"><a href="#__codelineno-8-48">48</a></span>
<span class="normal"><a href="#__codelineno-8-49">49</a></span>
<span class="normal"><a href="#__codelineno-8-50">50</a></span>
<span class="normal"><a href="#__codelineno-8-51">51</a></span>
<span class="normal"><a href="#__codelineno-8-52">52</a></span>
<span class="normal"><a href="#__codelineno-8-53">53</a></span>
<span class="normal"><a href="#__codelineno-8-54">54</a></span>
<span class="normal"><a href="#__codelineno-8-55">55</a></span>
<span class="normal"><a href="#__codelineno-8-56">56</a></span>
<span class="normal"><a href="#__codelineno-8-57">57</a></span>
<span class="normal"><a href="#__codelineno-8-58">58</a></span>
<span class="normal"><a href="#__codelineno-8-59">59</a></span>
<span class="normal"><a href="#__codelineno-8-60">60</a></span>
<span class="normal"><a href="#__codelineno-8-61">61</a></span>
<span class="normal"><a href="#__codelineno-8-62">62</a></span>
<span class="normal"><a href="#__codelineno-8-63">63</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">"project_name"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Title of the Project"</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="p">}</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">"OpenVPN_instance_type"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"The type of EC2 instance to launch for the OpenVPN Server"</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="p">}</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">"openvpn_tcp_ports"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">map</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Map of OpenVPN ports to their descriptions"</span>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="p">}</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">"openvpn_udp_ports"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">map</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Map of OpenVPN UDP ports to their descriptions"</span>
<a id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="p">}</span>
<a id="__codelineno-8-19" name="__codelineno-8-19"></a>
<a id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">"aws_regions"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">map</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span>
<a id="__codelineno-8-22" name="__codelineno-8-22"></a><span class="nb">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-23" name="__codelineno-8-23"></a><span class="w">    </span><span class="s2">"us-east-1"</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"N. Virginia"</span>
<a id="__codelineno-8-24" name="__codelineno-8-24"></a><span class="w">    </span><span class="s2">"us-east-2"</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"Ohio"</span>
<a id="__codelineno-8-25" name="__codelineno-8-25"></a><span class="w">    </span><span class="s2">"us-west-1"</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"N. California"</span>
<a id="__codelineno-8-26" name="__codelineno-8-26"></a><span class="w">    </span><span class="s2">"us-west-2"</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"Oregon"</span>
<a id="__codelineno-8-27" name="__codelineno-8-27"></a><span class="w">    </span><span class="s2">"af-south-1"</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"Cape Town"</span>
<a id="__codelineno-8-28" name="__codelineno-8-28"></a><span class="w">    </span><span class="s2">"ap-east-1"</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"Hong Kong"</span>
<a id="__codelineno-8-29" name="__codelineno-8-29"></a><span class="w">    </span><span class="s2">"ap-south-1"</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"Mumbai"</span>
<a id="__codelineno-8-30" name="__codelineno-8-30"></a><span class="w">    </span><span class="s2">"ap-southeast-1"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Singapore"</span>
<a id="__codelineno-8-31" name="__codelineno-8-31"></a><span class="w">    </span><span class="s2">"ap-southeast-2"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Sydney"</span>
<a id="__codelineno-8-32" name="__codelineno-8-32"></a><span class="w">    </span><span class="s2">"ap-southeast-3"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Jakarta"</span>
<a id="__codelineno-8-33" name="__codelineno-8-33"></a><span class="w">    </span><span class="s2">"ap-northeast-1"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Tokyo"</span>
<a id="__codelineno-8-34" name="__codelineno-8-34"></a><span class="w">    </span><span class="s2">"ap-northeast-2"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Seoul"</span>
<a id="__codelineno-8-35" name="__codelineno-8-35"></a><span class="w">    </span><span class="s2">"ap-northeast-3"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Osaka"</span>
<a id="__codelineno-8-36" name="__codelineno-8-36"></a><span class="w">    </span><span class="s2">"ca-central-1"</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Canada Central"</span>
<a id="__codelineno-8-37" name="__codelineno-8-37"></a><span class="w">    </span><span class="s2">"ca-west-1"</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"Calgary"</span>
<a id="__codelineno-8-38" name="__codelineno-8-38"></a><span class="w">    </span><span class="s2">"cn-north-1"</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"Beijing"</span>
<a id="__codelineno-8-39" name="__codelineno-8-39"></a><span class="w">    </span><span class="s2">"cn-northwest-1"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Ningxia"</span>
<a id="__codelineno-8-40" name="__codelineno-8-40"></a><span class="w">    </span><span class="s2">"eu-central-1"</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Frankfurt"</span>
<a id="__codelineno-8-41" name="__codelineno-8-41"></a><span class="w">    </span><span class="s2">"eu-central-2"</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Zurich"</span>
<a id="__codelineno-8-42" name="__codelineno-8-42"></a><span class="w">    </span><span class="s2">"eu-west-1"</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"Ireland"</span>
<a id="__codelineno-8-43" name="__codelineno-8-43"></a><span class="w">    </span><span class="s2">"eu-west-2"</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"London"</span>
<a id="__codelineno-8-44" name="__codelineno-8-44"></a><span class="w">    </span><span class="s2">"eu-west-3"</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"Paris"</span>
<a id="__codelineno-8-45" name="__codelineno-8-45"></a><span class="w">    </span><span class="s2">"eu-north-1"</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"Stockholm"</span>
<a id="__codelineno-8-46" name="__codelineno-8-46"></a><span class="w">    </span><span class="s2">"eu-south-1"</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"Milan"</span>
<a id="__codelineno-8-47" name="__codelineno-8-47"></a><span class="w">    </span><span class="s2">"eu-south-2"</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"Spain"</span>
<a id="__codelineno-8-48" name="__codelineno-8-48"></a><span class="w">    </span><span class="s2">"me-south-1"</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">"Bahrain"</span>
<a id="__codelineno-8-49" name="__codelineno-8-49"></a><span class="w">    </span><span class="s2">"me-central-1"</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"UAE"</span>
<a id="__codelineno-8-50" name="__codelineno-8-50"></a><span class="w">    </span><span class="s2">"sa-east-1"</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="s2">"São Paulo"</span>
<a id="__codelineno-8-51" name="__codelineno-8-51"></a><span class="w">    </span><span class="s2">"il-central-1"</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">"Tel Aviv"</span>
<a id="__codelineno-8-52" name="__codelineno-8-52"></a><span class="p">}</span>
<a id="__codelineno-8-53" name="__codelineno-8-53"></a><span class="p">}</span>
<a id="__codelineno-8-54" name="__codelineno-8-54"></a>
<a id="__codelineno-8-55" name="__codelineno-8-55"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">"selected_region"</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-56" name="__codelineno-8-56"></a><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-8-57" name="__codelineno-8-57"></a><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Enter the AWS region where you want to deploy your OpenVPN Server and press Enter:"</span>
<a id="__codelineno-8-58" name="__codelineno-8-58"></a>
<a id="__codelineno-8-59" name="__codelineno-8-59"></a><span class="nb">validation</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-60" name="__codelineno-8-60"></a><span class="w">    </span><span class="na">condition</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nf">can</span><span class="p">(</span><span class="nf">regex</span><span class="p">(</span><span class="s2">"^(eu|us|ap|ca|sa|me|af|il|cn)-(central|west|east|north|south|southeast|northeast|northwest)-[1-3]$"</span><span class="p">,</span><span class="w"> </span><span class="nv">var.selected_region</span><span class="p">))</span>
<a id="__codelineno-8-61" name="__codelineno-8-61"></a><span class="w">    </span><span class="na">error_message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Please select a valid AWS region from the provided list."</span>
<a id="__codelineno-8-62" name="__codelineno-8-62"></a><span class="p">}</span>
<a id="__codelineno-8-63" name="__codelineno-8-63"></a><span class="p">}</span>
</code></pre></div></td></tr></tbody></table></div>
</details>
<p>The <code>variables.tf</code> file is used to define variables that make the configuration more dynamic and reusable. By abstracting values into variables, I can easily customize the infrastructure without directly modifying the configuration files.</p>
</details>
</details>
<h2 id="setting-the-script-options"><strong>Setting the script options</strong><a class="headerlink" href="#setting-the-script-options" title="Copy this link to reference this section">¶</a></h2>
<p>The script allows you to set some options based on your use case. These are the available options you can set:</p>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" checked><span class="task-list-indicator"></span></label> <mark>project_name</mark> - This is used for labelling purposes only. It is appended to the resource tags</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" checked><span class="task-list-indicator"></span></label> <mark>OpenVPN_instance_type</mark> - This has been set to <code>t2-micro</code> so the setup remains within the AWS free-tier plan.  You can change this to any suitable instance type but a t2-micro will server in most situations</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" checked><span class="task-list-indicator"></span></label> <mark>openvpn_user</mark> - This is the username used to create the <code>*.ovpn</code> profile file on the VPN server. The profile name is displayed when you connect through the OpenVPN client. It is currently set to append the selected AWS region so you can easily know which region you are connected to.</li>
<li class="task-list-item"><label class="task-list-control"><input type="checkbox" checked><span class="task-list-indicator"></span></label> <mark>selected_region</mark> - this option is set at runtime and it is required for the script to run. Here you select the AWS region where you want your server to be hosted.  The region you select will determine where your VPN traffic is routed through. For example, if you select <code>ca-central-1</code>, your VPN traffic will be routed through the AWS Canada Central IP address and as such your public IP address will read "Quebec, Montreal, Canada" </li>
</ul>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" data-title="Public IP address showing Canada" data-desc-position="bottom"><img alt="Public IP address showing Canada" src="../../assets/images/ovpn-canada-ip.png" title="Public IP address showing Canada"></a></p>
<figcaption>
<p>Public IP address showing Canada</p>
</figcaption>
</figure>
<p>The list of acceptable AWS regions are shown <a href="https://opeyemitechpro.github.io/my-projects/terraform_projects/openvpn_access_server/#list-of-accepted-aws-regions">here</a></p>
<h2 id="running-the-script"><strong>Running the script</strong><a class="headerlink" href="#running-the-script" title="Copy this link to reference this section">¶</a></h2>
<p>Follow the <mark><strong>"Quick Start Guide"</strong></mark> below to provision and configure your OpenVPN server and to connect to your new VPN network.</p>
<h2 id="quick-start-guide"><strong>Quick Start Guide</strong><a class="headerlink" href="#quick-start-guide" title="Copy this link to reference this section">¶</a></h2>
<details class="info">
<summary>Click here for a quick start guide on setting up the OpenVPN Access Server</summary>
<h3 id="clone-the-repository">Clone the Repository<a class="headerlink" href="#clone-the-repository" title="Copy this link to reference this section">¶</a></h3>
<p>Create a folder on your local machine and clone the repository in the folder</p>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/opeyemitechpro/OpenVPN-Terraform.git
</code></pre></div></td></tr></tbody></table></div>
<h3 id="initialize-the-terraform-configuration">Initialize the terraform configuration<a class="headerlink" href="#initialize-the-terraform-configuration" title="Copy this link to reference this section">¶</a></h3>
<p>From within the cloned directory, initialize the terraform configuration</p>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a>terraform<span class="w"> </span>init
</code></pre></div></td></tr></tbody></table></div>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" data-title="Terraform Initialiaztion Command" data-desc-position="bottom"><img alt="Terraform Initialiaztion Command" src="../../assets/images/ovpn-terraform-init.png" title="Terraform Initialiaztion Command"></a></p>
<figcaption>
<p>Terraform Initialiaztion Command</p>
</figcaption>
</figure>
<h3 id="apply-the-terraform-configuration">Apply the Terraform Configuration<a class="headerlink" href="#apply-the-terraform-configuration" title="Copy this link to reference this section">¶</a></h3>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a>terraform<span class="w"> </span>apply<span class="w"> </span>-auto-approve
</code></pre></div></td></tr></tbody></table></div>
<ul>
<li>When prompted, enter an AWS region from the list below and press enter.  (e.g. <code>us-west-2</code>)</li>
<li>This will be the AWS region where the VPN server and all resources will be hosted. </li>
</ul>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" data-title="Terraform apply command" data-desc-position="bottom"><img alt="Terraform apply command" src="../../assets/images/ovpn-terraform-apply.png" title="Terraform apply command"></a></p>
<figcaption>
<p>Terraform apply command</p>
</figcaption>
</figure>
<h4 id="list-of-accepted-aws-regions"><mark>List of accepted AWS regions</mark><a class="headerlink" href="#list-of-accepted-aws-regions" title="Copy this link to reference this section">¶</a></h4>
<ul>
<li>us-east-1       =  N. Virginia </li>
<li>us-east-2       =  Ohio </li>
<li>us-west-1       =  N. California </li>
<li>us-west-2       =  Oregon </li>
<li>af-south-1      =  Cape Town </li>
<li>ap-east-1       =  Hong Kong </li>
<li>ap-south-1      =  Mumbai </li>
<li>ap-southeast-1  =  Singapore </li>
<li>ap-southeast-2  =  Sydney </li>
<li>ap-southeast-3  =  Jakarta </li>
<li>ap-northeast-1  =  Tokyo </li>
<li>ap-northeast-2  =  Seoul </li>
<li>ap-northeast-3  =  Osaka </li>
<li>ca-central-1    =  Canada Central </li>
<li>eu-central-1    =  Frankfurt </li>
<li>eu-west-1       =  Ireland </li>
<li>eu-west-2       =  London </li>
<li>eu-west-3       =  Paris </li>
<li>eu-north-1      =  Stockholm </li>
<li>eu-south-1      =  Milan </li>
<li>eu-south-2      =  Zurich </li>
<li>me-south-1      =  Bahrain </li>
<li>me-central-1    =  UAE </li>
<li>sa-east-1       =  São Paulo </li>
</ul>
<h3 id="outputs">Outputs<a class="headerlink" href="#outputs" title="Copy this link to reference this section">¶</a></h3>
<p>At the end of the terraform apply command, the script outputs the following details on the screen:</p>
<ul>
<li>The Public IP address of the VPN Server</li>
<li>The instance-ID</li>
<li>The name of the keypair created</li>
<li>The path where the private key file was saved on your local machine</li>
<li>SSH connection string that you can use to the VPN server</li>
<li>The OpenVPN profile file that you will use to ssh into the VPN server</li>
<li>Further steps to launch your VPN connection</li>
</ul>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" data-title="Terraform Output" data-desc-position="bottom"><img alt="Terraform Output" src="../../assets/images/ovpn-terraform-output.png" title="Terraform Output Screen"></a></p>
<figcaption>
<p>Terraform Output Screen</p>
</figcaption>
</figure>
<figure>
<p><strong>Showing the OpenVPN server on the AWS EC2 Console</strong>
<a class="glightbox" data-type="image" data-width="100%" data-height="auto" data-title="AWS Console Showing the OpenVPN Server details" data-desc-position="bottom"><img alt="AWS Console Showing the OpenVPN Server details" src="../../assets/images/ovpn-terraform-console.png" title="AWS Console Showing the OpenVPN Server details"></a></p>
<figcaption>
<p>AWS Console Showing the OpenVPN Server details</p>
</figcaption>
</figure>
<h3 id="connect-to-your-vpn">Connect to your VPN<a class="headerlink" href="#connect-to-your-vpn" title="Copy this link to reference this section">¶</a></h3>
<ul>
<li>Download and install <a href="https://openvpn.net/client/" target="_blank">OpenVPN Connect client</a> on your local machine</li>
<li>Import the <code>*.ovpn</code> file into the OpenVPN cient appllication</li>
<li>Connect to your VPN network</li>
</ul>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" data-title="OpenVPN Client Connected to the VPN" data-desc-position="bottom"><img alt="OpenVPN Client Connected to the VPN" src="../../assets/images/ovpn-terraform-connect.png" title="OpenVPN Client Connected to the VPN"></a></p>
<figcaption>
<p>OpenVPN Client Connected to the VPN</p>
</figcaption>
</figure>
<h3 id="testing-your-vpn-connection">Testing your VPN Connection<a class="headerlink" href="#testing-your-vpn-connection" title="Copy this link to reference this section">¶</a></h3>
<p>One very simple way to check if you are actually connected to your new VPN network is to open your browser and check your public IP address. You can use websites like <a href="hhtps://whatsmyip.com">whatsmyip.com</a> or simply search "what is my ip address" on Google to check your public IP address.  </p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" data-title="Public IP address showing Canada" data-desc-position="bottom"><img alt="Public IP address showing Canada" src="../../assets/images/ovpn-canada-ip.png" title="Public IP address showing Canada"></a></p>
<figcaption>
<p>Public IP address showing Canada</p>
</figcaption>
</figure>
<p>When you are connected to your VPN server, your internet traffic will be routed through your VPN server and as such, only your VPN server IP address will be seen publicly, your local ISP assigned ip address will be hidden from the internet. </p>
<h3 id="cleanup">Cleanup<a class="headerlink" href="#cleanup" title="Copy this link to reference this section">¶</a></h3>
<p>To delete the server and cleanup all resources that were created.</p>
<ol>
<li>
<p>First disconnect the OpenVPN Connect Client</p>
</li>
<li>
<p>Then enter the command below to delete all locally created files and also delete the server and all other resources from your AWS account.  </p>
</li>
</ol>
<div class="highlight"><table class="highlighttable"><tbody><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>terraform<span class="w"> </span>destroy<span class="w"> </span>-auto-approve<span class="w"> </span>
</code></pre></div></td></tr></tbody></table></div>
<ul>
<li>This will terminate the EC2 instance and delete all resources created and also delete the files that were locally created in the terraform working directory i.e. the *.ovpn user profile and the keypair file that was created earlier </li>
</ul>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" data-title="Terraform Destroy Command" data-desc-position="bottom"><img alt="Terraform Destroy Command" src="../../assets/images/ovpn-terraform-destroy.png" title="Terraform Destroy Command"></a></p>
<figcaption>
<p>Terraform Destroy Command</p>
</figcaption>
</figure>
</details>
<h2 id="use-cases"><strong>Use Cases</strong><a class="headerlink" href="#use-cases" title="Copy this link to reference this section">¶</a></h2>
<p>This self-hosted OpenVPN solution offers flexibility, control, and enhanced security compared to commercial VPN services. Here are some possible use cases:  </p>
<p><strong>1. Secure Remote Access</strong>
- <strong>Corporate Network Access</strong>: Allow employees to securely connect to on-premises resources or internal systems.<br>
- <strong>Remote Development</strong>: Enable developers to work on private servers or cloud environments without exposing them to the public internet.  </p>
<p><strong>2. Privacy and Anonymity</strong>
- <strong>Encrypt Internet Traffic</strong>: Protect personal or organizational internet traffic, especially when using public Wi-Fi.<br>
- <strong>Location Masking</strong>: Access the internet as if from a specific location to bypass geolocation restrictions.  </p>
<p><strong>3. Secure Inter-Office Communication</strong>
- <strong>Branch Office Connectivity</strong>: Connect multiple office locations securely over a shared network.<br>
- <strong>IoT Devices</strong>: Secure communication for IoT devices spread across different sites.  </p>
<p><strong>4. Personal Use</strong>
- <strong>Ad-Free Browsing</strong>: Avoid invasive tracking and ads by routing traffic through your onw self-hosted VPN server.<br>
- <strong>Bypass ISP Throttling</strong>: Prevent internet service providers from throttling bandwidth for specific services.  </p>
<p><strong>5. Development and Testing</strong>
- <strong>Environment Testing</strong>: Simulate network environments for application development and QA testing.<br>
- <strong>Access Restricted APIs</strong>: Connect securely to APIs or other restricted services during development.  </p>
<p><strong>6. Secure Cloud Resources</strong>
- <strong>Private Cloud Access</strong>: Connect securely to AWS resources without exposing them to the public internet.<br>
- <strong>DevOps Pipelines</strong>: Ensure secure deployment pipelines that require private network connectivity.  </p>
<p><strong>7. Enhanced Security</strong>
- <strong>Multi-Layered Security</strong>: Combine a self-hosted VPN with firewalls or IDS/IPS systems to add another layer of protection.<br>
- <strong>Self-Controlled Data</strong>: Prevent third-party logging or tracking of your internet activity.  </p>
<p><strong>8. Education and Research</strong>
- <strong>Bypass Censorship</strong>: Enable access to academic resources or restricted sites in regions with strict censorship.<br>
- <strong>Research Anonymity</strong>: Conduct secure and private research online.  </p>
<p><strong>9. Cost Efficiency</strong>
- <strong>Avoiding Commercial VPN Costs</strong>: Reduce long-term expenses for secure connections, especially for teams or organizations.<br>
- <strong>No User Limits</strong>: Create a solution tailored to your usage, avoiding per-user or bandwidth fees common with commercial VPNs.  </p>
<p><strong>10. Gaming and Media</strong>
- <strong>LAN Gaming</strong>: Create a virtual local area network for multiplayer gaming.<br>
- <strong>Bypass Regional Blocks</strong>: Access region-restricted content like streaming services.  </p>
<p>By usign this solution to host your own VPN, you gain complete control over configuration, logs, and data flow, making it an excellent choice for your specific use case.</p>
<h2 id="conclusion"><strong>Conclusion</strong><a class="headerlink" href="#conclusion" title="Copy this link to reference this section">¶</a></h2>
<p>Setting up a self-hosted VPN server using this Terraform configuration script is a straightforward and efficient way to enhance your network security and maintain control over your data. By following this documentation, you can deploy a robust OpenVPN server on AWS, customize it to your needs, and ensure private and secure internet access. This guide aims to empower you with the knowledge and tools to manage your own VPN server effectively. For any troubleshooting or further customization, explore the Terraform and OpenVPN documentation for advanced insights and solutions. </p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="August 26, 2025 18:37:49 UTC"><span class="timeago" datetime="2025-08-26T18:37:49+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="August 26, 2025 18:37:49 UTC">2025-08-26</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"></path></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="July 9, 2024 00:20:27 UTC"><span class="timeago" datetime="2024-07-09T00:20:27+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="July 9, 2024 00:20:27 UTC">2024-07-09</span>
  </span>

    
    
    
      
  <span class="md-source-file__fact">
    
      
  <span class="md-icon" title="Contributors">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"></path></svg>
  </span>
  <span>GitHub</span>

    
    <nav>
      
        <a href="https://github.com/opeyemitechpro" class="md-author" title="@opeyemitechpro">
          
          <img src="https://avatars.githubusercontent.com/u/135651560?v=4&amp;size=72" alt="opeyemitechpro">
        </a>
      
      
      
    </nav>
  </span>

    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful? Please give a feedback
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.349 2.378a.75.75 0 0 1 .808-.361l.127.027a3.875 3.875 0 0 1 2.879 4.97L16.527 9h1.137c2.645 0 4.513 2.591 3.676 5.1l-1.559 4.678A3.25 3.25 0 0 1 16.698 21h-5.289a4.5 4.5 0 0 1-2.828-.999A1.75 1.75 0 0 1 7 21H4.75A1.75 1.75 0 0 1 3 19.25v-8.5C3 9.784 3.784 9 4.75 9h4.67a.25.25 0 0 0 .217-.126zM8.75 18.16l.683.598a3 3 0 0 0 1.976.742h5.289a1.75 1.75 0 0 0 1.66-1.197l1.559-4.677a2.375 2.375 0 0 0-2.253-3.126H15.5a.75.75 0 0 1-.714-.979l.948-2.964a2.375 2.375 0 0 0-1.373-2.927l-3.422 5.988a1.75 1.75 0 0 1-1.519.882h-.67zm-1.5-7.66h-2.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25H7a.25.25 0 0 0 .25-.25z"></path></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page can be improved" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10.651 21.622a.75.75 0 0 1-.808.361l-.127-.027a3.875 3.875 0 0 1-2.879-4.97L7.473 15H6.336c-2.645 0-4.513-2.591-3.676-5.1l1.559-4.678A3.25 3.25 0 0 1 7.302 3h5.289c1.031 0 2.029.354 2.828.999A1.75 1.75 0 0 1 17 3h2.25c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 19.25 15h-4.67a.25.25 0 0 0-.217.126zM15.25 5.84l-.684-.598a3 3 0 0 0-1.975-.742H7.302a1.75 1.75 0 0 0-1.66 1.197l-1.559 4.677A2.375 2.375 0 0 0 6.336 13.5H8.5a.75.75 0 0 1 .714.979l-.948 2.964a2.375 2.375 0 0 0 1.373 2.927l3.422-5.988a1.75 1.75 0 0 1 1.519-.882h.67zm1.5 7.66h2.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25H17a.25.25 0 0 0-.25.25z"></path></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="0" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="1" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback! Help me to improve this page by completing my <a href="https://forms.gle/Bb4gifiuyrE4enDX6" target="_blank" rel="noopener">feedback form</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


  <h2 id="__comments">If you have Comments or Questions on the project documentation above, drop them here and I will respond</h2>
  You need to sign-in to GitHub to comment.
  <!-- Insert generated snippet here -->
   <!-- Solution to Giscus error 404 showing in the comments - https://github.com/squidfunk/mkdocs-material/pull/6502 -->

  <script>
      var script = document.createElement("script");
      script.setAttribute("src", "https://" + "giscus.app" + "/client.js");
      script.setAttribute("data-repo", "opeyemitechpro/my-projects");
      script.setAttribute("data-repo-id", "R_kgDOMCpsxg");
      script.setAttribute("data-category", "General");
      script.setAttribute("data-category-id", "DIC_kwDOMCpsxs4ChyT3");
      script.setAttribute("data-mapping", "title");
      script.setAttribute("data-strict", "1"); 
      script.setAttribute("data-reactions-enabled", "1");
      script.setAttribute("data-emit-metadata", "1");
      script.setAttribute("data-theme", "preferred_color_scheme");
      script.setAttribute("data-lang", "en");
      script.setAttribute("crossorigin", "anonymous");
      script.setAttribute("async", true);
      document.currentScript.insertAdjacentElement("afterend", script);
    </script>


  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                

              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer">
        
          
          <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Terraform Projects">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Terraform Projects
              </div>
            </div>
          </a>
        
        
          
          <a href="../../blog/" class="md-footer__link md-footer__link--next" aria-label="Next: My Blog">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                My Blog
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2023 - 2025 <a href="https://opeyemitechpro.github.io" target="_blank" rel="noopener">Opeyemi Okuboyejo</a> <br><a href="https://opeyemitechpro.github.io" target="_blank" rel="noopener">About Opeyemi</a><br><a href="https://forms.gle/Bb4gifiuyrE4enDX6" target="_blank" rel="noopener">Contact Opeyemi</a><br><br><a href="https://opeyemitechpro.github.io/privacy-policy" rel="noopener">Privacy Policy</a><br><a href="https://opeyemitechpro.github.io/terms" rel="noopener">Terms &amp; Conditions</a><br><a href="#__consent">Manage cookie settings</a><br><br>Hosted on GitHub 

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://opeyemitechpro.github.io" target="_blank" rel="noopener" title="Opeyemi Okuboyejo's Profile" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2s.06-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.92 7.92 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8 8 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.7 15.7 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2"></path></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linkedin.com/in/opeyemi-okuboyejo/" target="_blank" rel="noopener" title="Opeyemi on LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"></path></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/opeyemitechpro" target="_blank" rel="noopener" title="Opeyemi on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
    </a>
  
    
    
    
    
    <a href="https://youtube.com/@opeyemitechpro" target="_blank" rel="noopener" title="OpeyemiTechPro on YouTube" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M549.7 124.1c-6.2-23.7-24.8-42.3-48.3-48.6C458.9 64 288.1 64 288.1 64S117.3 64 74.7 75.5c-23.5 6.3-42 24.9-48.3 48.6C15 167 15 256.4 15 256.4s0 89.4 11.4 132.3c6.3 23.6 24.8 41.5 48.3 47.8C117.3 448 288.1 448 288.1 448s170.8 0 213.4-11.5c23.5-6.3 42-24.2 48.3-47.8 11.4-42.9 11.4-132.3 11.4-132.3s0-89.4-11.4-132.3zM232.2 337.6V175.2l142.7 81.2z"></path></svg>
    </a>
  
    
    
    
    
    <a href="mailto:okuboyejoopeyemi01@gmail.com" target="_blank" rel="noopener" title="Email Me" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M1.75 3h20.5c.966 0 1.75.784 1.75 1.75v14a1.75 1.75 0 0 1-1.75 1.75H1.75A1.75 1.75 0 0 1 0 18.75v-14C0 3.784.784 3 1.75 3M1.5 7.412V18.75c0 .138.112.25.25.25h20.5a.25.25 0 0 0 .25-.25V7.412l-9.52 6.433c-.592.4-1.368.4-1.96 0Zm0-2.662v.852l10.36 7a.25.25 0 0 0 .28 0l10.36-7V4.75a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25"></path></svg>
    </a>
  
    
    
    
    
    <a href="https://community.aws/@opeyemitechpro" target="_blank" rel="noopener" title="Opeyemi on AWS Community" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M180.4 203c-.7 22.6 10.6 32.7 10.9 39-.1 1.3-.6 2.5-1.3 3.6s-1.7 2-2.8 2.6l-12.8 9c-1.7 1.2-3.6 1.8-5.6 1.9-.4 0-8.2 1.8-20.5-25.6-7.5 9.4-17 16.9-27.9 22s-22.7 7.7-34.7 7.5c-16.3.9-60.4-9.2-58.1-56.2-1.6-38.3 34.1-62.1 70.9-60 7.1 0 21.6.4 47 6.3v-15.6c2.7-26.5-14.7-47-44.8-43.9-2.4 0-19.4-.5-45.8 10.1-7.4 3.4-8.3 2.8-10.8 2.8-7.4 0-4.4-21.5-2.9-24.2 5.2-6.4 35.9-18.4 65.9-18.2 20.1-1.8 40.1 4.4 55.7 17.3 6.3 7.1 11.2 15.4 14.2 24.4s4.2 18.5 3.5 28v69.3zM94 235.4c32.4-.5 46.2-20 49.3-30.5 2.5-10.1 2.1-16.4 2.1-27.4-9.7-2.3-23.6-4.9-39.6-4.9-15.2-1.1-42.8 5.6-41.7 32.3-1.2 16.8 11.1 31.4 30 30.5zm170.9 23.1c-7.9.7-11.5-4.9-12.7-10.4L202.4 83.4c-1-2.8-1.6-5.6-1.9-8.6-.2-1.2.1-2.4.8-3.4s1.8-1.6 3-1.8h22.2c8.8-.9 11.6 6 12.6 10.4l35.8 140.8L308.1 80c.5-3.2 2.9-11.1 12.8-10.2h17.2c2.2-.2 11.1-.5 12.7 10.4l33.3 142.5L421 80.1c.5-2.2 2.7-11.4 12.7-10.4h19.7c.9-.1 6.2-.8 5.3 8.6-.4 1.8 3.4-10.7-52.8 169.9-1.1 5.5-4.8 11.1-12.7 10.4h-18.7c-10.9 1.2-12.5-9.7-12.7-10.7l-33.2-137.1-32.8 137c-.2 1.1-1.7 11.9-12.7 10.7h-18.3zm273.5 5.6c-5.9 0-33.9-.3-57.4-12.3-2.3-1-4.3-2.6-5.7-4.8s-2.1-4.6-2.1-7.1v-10.7c0-8.5 6.2-6.9 8.8-5.9 10 4.1 16.5 7.1 28.8 9.6 36.7 7.5 52.8-2.3 56.7-4.5 13.2-7.8 14.2-25.7 5.3-34.9-10.5-8.8-15.5-9.1-53.1-21-4.6-1.3-43.7-13.6-43.8-52.4-.6-28.2 25-56.2 69.5-56 12.7 0 46.4 4.1 55.6 15.6 1.4 2.1 2 4.6 1.9 7v10.1c0 4.4-1.6 6.7-4.9 6.7-7.7-.9-21.4-11.2-49.2-10.8-6.9-.4-39.9.9-38.4 25-.4 19 26.6 26.1 29.7 26.9 36.5 11 48.6 12.8 63.1 29.6 17.1 22.2 7.9 48.3 4.3 55.4-19.1 37.5-68.4 34.4-69.3 34.4zM578.6 369c-70 51.7-171.7 79.2-258.5 79.2C203 449 89.8 405.9 2.8 327.5c-6.5-5.9-.8-14 7.2-9.5 96.5 55.2 205.7 84.2 316.9 84.1 83-.4 165.1-17.3 241.6-49.5 11.8-5 21.8 7.8 10.1 16.4m29.2-33.3c-9-11.5-59.3-5.4-81.8-2.7-6.8.8-7.9-5.1-1.8-9.5 40.1-28.2 105.9-20.1 113.4-10.6s-2.1 75.4-39.6 106.9c-5.8 4.9-11.3 2.3-8.7-4.1 8.4-21.3 27.4-68.5 18.4-80z"></path></svg>
    </a>
  
    
    
    
    
    <a href="https://dev.to/opeyemitechpro" target="_blank" rel="noopener" title="Opeyemi on Dev.to" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M120.1 208.3c-3.9-2.9-7.8-4.3-11.6-4.3H91.1v104.5h17.4c3.9 0 7.8-1.4 11.6-4.3s5.8-7.3 5.8-13.1v-69.7c0-5.8-2-10.2-5.8-13.1M404.1 32H43.9C19.7 32 .1 51.6 0 75.8v360.4C.1 460.4 19.7 480 43.9 480h360.2c24.2 0 43.8-19.6 43.9-43.8V75.8c-.1-24.2-19.7-43.8-43.9-43.8M154.2 291.2c0 18.8-11.6 47.3-48.4 47.3H59.4V173h47.4c35.4 0 47.4 28.5 47.4 47.3zm100.7-88.7h-53.3v38.4h32.6v29.6h-32.6v38.4h53.3v29.6h-62.2c-11.2.3-20.4-8.5-20.7-19.7V193.7c-.3-11.1 8.6-20.4 19.7-20.7h63.2zm103.6 115.3c-13.2 30.7-36.8 24.6-47.4 0L272.6 173h32.6l29.7 113.7L364.5 173h32.6l-38.5 144.8z"></path></svg>
    </a>
  
    
    
    
    
    <a href="https://x.com/opeyemitechpro" target="_blank" rel="noopener" title="Opeyemi on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"></path></svg>
    </a>
  
    
    
    
    
    <a href="https://t.me/opeyemitechpro_cloud" target="_blank" rel="noopener" title="Opeyemi on Telegram" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M256 8a248 248 0 1 0 0 496 248 248 0 1 0 0-496m115 168.7c-3.7 39.2-19.9 134.4-28.1 178.3-3.5 18.6-10.3 24.8-16.9 25.4-14.4 1.3-25.3-9.5-39.3-18.7-21.8-14.3-34.2-23.2-55.3-37.2-24.5-16.1-8.6-25 5.3-39.5 3.7-3.8 67.1-61.5 68.3-66.7.2-.7.3-3.1-1.2-4.4s-3.6-.8-5.1-.5c-2.2.5-37.1 23.5-104.6 69.1-9.9 6.8-18.9 10.1-26.9 9.9-8.9-.2-25.9-5-38.6-9.1-15.5-5-27.9-7.7-26.8-16.3.6-4.5 6.7-9 18.4-13.7 72.3-31.5 120.5-52.3 144.6-62.3 68.9-28.6 83.2-33.6 92.5-33.8 2.1 0 6.6.5 9.6 2.9 2 1.7 3.2 4.1 3.5 6.7.5 3.2.6 6.5.4 9.8z"></path></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            



<h4>Cookie Consent</h4>
<p>I use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of my documentation and whether users find what they're searching for. With your consent, you're helping me to make my documentation better. Thanks</p>
<input class="md-toggle" type="checkbox" id="__settings">
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics" checked>
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.instant", "navigation.instant.progress", "navigation.instant.prefetch", "navigation.instant.preview", "navigation.sections", "navigation.tracking", "navigation.top", "navigation.path", "navigation.footer", "navigation.indexes", "toc.follow", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy", "content.tooltips", "content.code.select", "content.code.annotate", "content.action.view", "content.action.edit"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": {"AWS": null, "DevOps": null, "Terraform": null}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
    
  
<script id="init-glightbox">document.querySelectorAll('.glightbox').forEach(function(element) {
    try {
        var img = element.querySelector('img');
        if (img && img.src) {
            element.setAttribute('href', img.src);
        } else {
            console.log('No img element with src attribute found');
        }
    } catch (error) {
        console.log('Error:', error);
    }
});
const lightbox = GLightbox({"touchNavigation": true, "loop": true, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>